<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="https://meyerweb.com/eric/tools/css/reset/reset.css"/><style data-href="/styles.a4a03032f8a85ba46eb0.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.border-white{--border-opacity:1;border-color:#fff;border-color:rgba(255,255,255,var(--border-opacity))}.rounded-full{border-radius:9999px}.border-solid{border-style:solid}.border{border-width:1px}.border-t{border-top-width:1px}.block{display:block}.inline{display:inline}.flex{display:flex}.table{display:table}.hidden{display:none}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-center{justify-content:center}.font-bold{font-weight:700}.h-screen{height:100vh}.text-3xl{font-size:1.875rem}.leading-6{line-height:1.5rem}.leading-8{line-height:2rem}.mb-4{margin-bottom:1rem}.mr-8{margin-right:2rem}.mb-12{margin-bottom:3rem}.mt-32{margin-top:8rem}.max-w-none{max-width:none}.max-w-4xl{max-width:56rem}.overflow-hidden{overflow:hidden}.p-0{padding:0}.p-8{padding:2rem}.pb-6{padding-bottom:1.5rem}.pr-8{padding-right:2rem}.pt-16{padding-top:4rem}.uppercase{text-transform:uppercase}.underline{text-decoration:underline}.w-32{width:8rem}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform}@keyframes spin{to{transform:rotate(1turn)}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,to{transform:translateY(-25%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:640px){.sm\:container{width:100%;max-width:640px}@media (min-width:768px){.sm\:container{max-width:768px}}@media (min-width:1024px){.sm\:container{max-width:1024px}}@media (min-width:1280px){.sm\:container{max-width:1280px}}}@media (min-width:768px){.md\:container{width:100%}@media (min-width:640px){.md\:container{max-width:640px}}@media (min-width:768px){.md\:container{max-width:768px}}@media (min-width:1024px){.md\:container{max-width:1024px}}@media (min-width:1280px){.md\:container{max-width:1280px}}.md\:block{display:block}.md\:flex{display:flex}.md\:hidden{display:none}.md\:mb-0{margin-bottom:0}.md\:p-8{padding:2rem}.md\:p-32{padding:8rem}.md\:pt-8{padding-top:2rem}.md\:pb-8{padding-bottom:2rem}.md\:w-48{width:12rem}}@media (min-width:1024px){.lg\:container{width:100%}@media (min-width:640px){.lg\:container{max-width:640px}}@media (min-width:768px){.lg\:container{max-width:768px}}@media (min-width:1024px){.lg\:container{max-width:1024px}}@media (min-width:1280px){.lg\:container{max-width:1280px}}}@media (min-width:1280px){.xl\:container{width:100%}@media (min-width:640px){.xl\:container{max-width:640px}}@media (min-width:768px){.xl\:container{max-width:768px}}@media (min-width:1024px){.xl\:container{max-width:1024px}}@media (min-width:1280px){.xl\:container{max-width:1280px}}}@media (prefers-color-scheme:dark){.dark-mode\:container{width:100%}@media (min-width:640px){.dark-mode\:container{max-width:640px}}@media (min-width:768px){.dark-mode\:container{max-width:768px}}@media (min-width:1024px){.dark-mode\:container{max-width:1024px}}@media (min-width:1280px){.dark-mode\:container{max-width:1280px}}.dark-mode\:text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}}</style><meta name="generator" content="Gatsby 2.18.10"/><title data-react-helmet="true">Self-Sizing UITableView Cells with SwiftUI</title><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Roboto:700" rel="stylesheet" type="text/css"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;1,300&amp;display=swap" rel="stylesheet"/><link data-react-helmet="true" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.0/styles/atom-one-light.min.css"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@noahsark769"/><meta data-react-helmet="true" name="twitter:site" content="@noahsark769"/><meta data-react-helmet="true" property="og:url" content="https://noahgilmore.com/blog/swiftui-self-sizing-cells/"/><meta data-react-helmet="true" property="og:title" content="Self-Sizing UITableView Cells with SwiftUI"/><meta data-react-helmet="true" property="og:description" content="It&#x27;s been a year since SwiftUI was released, and many iOS developers who are lucky to only support the two most current iOS versions will soon be able to start writing SwiftUI in their production apps. There are clear benefits to using SwiftUI (I could probably devote a whole post to them), so the question I&#x27;ve been thinking about is: where to start?"/><meta data-react-helmet="true" name="twitter:description" content="It&#x27;s been a year since SwiftUI was released, and many iOS developers who are lucky to only support the two most current iOS versions will soon be able to start writing SwiftUI in their production apps. There are clear benefits to using SwiftUI (I could probably devote a whole post to them), so the question I&#x27;ve been thinking about is: where to start?"/><meta data-react-helmet="true" name="description" content="It&#x27;s been a year since SwiftUI was released, and many iOS developers who are lucky to only support the two most current iOS versions will soon be able to start writing SwiftUI in their production apps. There are clear benefits to using SwiftUI (I could probably devote a whole post to them), so the question I&#x27;ve been thinking about is: where to start?"/><meta data-react-helmet="true" property="og:image" content="https://noahgilmore.com/static/swiftuicell-1-3b19d05d879dcf56bb3a6d44a1555e7f.png"/><meta data-react-helmet="true" name="twitter:image" content="https://noahgilmore.com/static/swiftuicell-1-3b19d05d879dcf56bb3a6d44a1555e7f.png"/><style data-styled="kZJxiO  inkKqg ihgmJg glYDzJ jjWRSm bkeDie hAFKjM jtmfVw gablWf bDzSYv iQPMaQ cMmljL ilthni fiaZzq hrBqpY bSsiAj iKttdc ylgnz bmzpLX fecpOA loyjLq joJmgG dVdQRb emBdTA fgyWQq jmGPXo gkfXpi dXIkuv" data-styled-version="4.4.1">
/* sc-component-id: FlowGrid__Container-sc-1akniko-0 */
.loyjLq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}
/* sc-component-id: FlowGrid__Row-sc-1akniko-1 */
.joJmgG{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
/* sc-component-id: FlowGrid__Item-sc-1akniko-2 */
.dVdQRb{-webkit-flex:1;-ms-flex:1;flex:1;}
/* sc-component-id: CaptionedImage__Wrap-owr0zk-0 */
.hrBqpY{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:20px 0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: CaptionedImage__Container-owr0zk-1 */
.bSsiAj{-webkit-flex:1;-ms-flex:1;flex:1;max-width:300px;}.iKttdc{-webkit-flex:1;-ms-flex:1;flex:1;max-width:400px;}.ylgnz{-webkit-flex:1;-ms-flex:1;flex:1;max-width:500px;}
/* sc-component-id: CaptionedImage__Caption-owr0zk-2 */
.bmzpLX{font-family:"Gentium Book Basic",times,serif;font-style:italic;font-size:16px;color:#999;margin-bottom:30px;margin-top:12px;text-align:center;line-height:1.2em;} .bmzpLX img{width:100%;margin-bottom:10px;}
/* sc-component-id: Tweet__Wrapper-sc-13ea3j0-0 */
.emBdTA{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: Tweet__InnerWrapper-sc-13ea3j0-1 */
.fgyWQq{width:1px;min-width:500px;} @media all and (max-width:600px){.fgyWQq{min-width:90%;}}
/* sc-component-id: sc-global-3677396698 */
@font-face{font-family:'Bariol';src:url('/static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot');src:url('/static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot?#iefix') format('embedded-opentype'), url('/static/Bariol-Regular-4afd94f0fd93a1f63b46c6c6ad792f71.woff') format('woff'), url('/static/Bariol-Regular-8a7d23d53f8d118e190c63e4e81a91fe.ttf') format('truetype'), url('/static/Bariol-Regular-75b90056f4cdf5a742897ec0a59569d7.svg#svgBariolRegular') format('svg');} *{box-sizing:border-box !important;} body{margin:0;padding:0;} @media (prefers-color-scheme:dark){html,body{background-color:#23282f;}}
/* sc-component-id: default__HighlightedA-phsh4y-6 */
.gkfXpi,.gkfXpi:hover,.gkfXpi:focus{color:#1A3F4B;-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;outline:none;-webkit-text-decoration:underline;text-decoration:underline;} @media (prefers-color-scheme:dark){.gkfXpi,.gkfXpi:hover,.gkfXpi:focus{color:#60b5d1;}}
/* sc-component-id: Nav__StyledNav-sc-17txzo8-0 */
.inkKqg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:20px 60px;} @media all and (max-width:600px){.inkKqg{padding:20px;}} @media (prefers-color-scheme:dark){.inkKqg{border-color:#777;}}
/* sc-component-id: Nav__Title-sc-17txzo8-1 */
.ihgmJg{-webkit-flex:2;-ms-flex:2;flex:2;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;font-size:28px;font-display:swap;} @media (prefers-color-scheme:dark){.ihgmJg{color:#fff;}}
/* sc-component-id: Nav__NavLinks-sc-17txzo8-2 */
.jjWRSm{margin:0;padding:0;-webkit-flex:10;-ms-flex:10;flex:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:horizontal;-ms-flex-direction:horizontal;flex-direction:horizontal;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;height:100%;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}
/* sc-component-id: Nav__NavLink-sc-17txzo8-3 */
.bkeDie{margin:0;padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;font-size:16px;padding:0px 8px;} @media all and (min-width:370px){.bkeDie{padding:0px 20px;}}
/* sc-component-id: Nav__StyledA-sc-17txzo8-4 */
.glYDzJ{height:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;} .glYDzJ,.glYDzJ:hover,.glYDzJ:focus{outline:none;color:inherit;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: BlogPost__BlogPostContainer-tv75ut-0 */
.hAFKjM{padding:60px 0;margin:0 auto;width:90%;} @media all and (min-width:600px){.hAFKjM{max-width:700px;margin:auto;}} @media all and (max-width:600px){.hAFKjM{width:100%;padding:20px 0;}}
/* sc-component-id: BlogPost__TitleContainer-tv75ut-1 */
.iQPMaQ{width:100%;margin-bottom:40px;}
/* sc-component-id: BlogPost__Heading-tv75ut-2 */
.cMmljL{width:100%;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;font-size:34px;margin-bottom:10px;line-height:1.2em;} @media (prefers-color-scheme:dark){.cMmljL{color:#fff;}}
/* sc-component-id: BlogPost__DateContainer-tv75ut-4 */
.ilthni{font-family:"Merriweather",times,serif;font-style:italic;font-size:13px;color:#999;}
/* sc-component-id: MarkdownContent__Container-gk8834-0 */
.fiaZzq p,.fiaZzq li{margin:0;padding:0;font-family:"Merriweather",times,serif;font-size:18px;line-height:29px;color:#333;padding-bottom:15px;margin-top:15px;} @media all and (max-width:600px){.fiaZzq p,.fiaZzq li{width:90%;margin:15px auto 0 auto;}} @media (prefers-color-scheme:dark){.fiaZzq p,.fiaZzq li{color:#fff;}} .fiaZzq blockquote{background-color:#faf9f7;border-left:4px solid #e5e4e1;padding:20px;font-style:italic;font-synthesis:weight;font-weight:300;} @media (prefers-color-scheme:dark){.fiaZzq blockquote{background-color:#2b2c2f;}} .fiaZzq blockquote p{margin:0;padding:0;color:#555;} @media (prefers-color-scheme:dark){.fiaZzq blockquote p{color:#fff;}} .fiaZzq a{color:#1A3F4B;-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;-webkit-text-decoration:underline;text-decoration:underline;} @media (prefers-color-scheme:dark){.fiaZzq a{color:#60b5d1;}} .fiaZzq a:hover{color:#47656E;} @media (prefers-color-scheme:dark){.fiaZzq a:hover{color:#6bcfef;}} .fiaZzq code{font-family:monospace;font-size:16px;padding:3px 5px;margin:0px 2px;} @media (prefers-color-scheme:dark){.fiaZzq code{color:#fff;}} .fiaZzq code:not(.vscode-highlight-code){font-family:monospace;font-size:16px;background-color:#faf9f7;border:1px solid #e5e4e1;padding:3px 5px;margin:0px 2px;color:#555;} @media (prefers-color-scheme:dark){.fiaZzq code:not(.vscode-highlight-code){color:#fff;background-color:#3f3f3f;}} .fiaZzq code:first-child{margin-left:0;} .fiaZzq pre{display:block;margin:0;padding:0;margin-top:10px;border:1px solid #e5e4e1;border-radius:2px;} @media all and (max-width:600px){.fiaZzq pre{width:100%;margin:10px auto 0 auto;border-left:none;border-right:none;border-radius:0;overflow-x:scroll;}} .fiaZzq pre > code{display:block;margin:0;padding:10px;font-family:monospace;font-size:14px;line-height:17px;white-space:pre-wrap;} @media all and (max-width:600px){.fiaZzq pre > code{font-size:15px;white-space:pre;padding:15px 5% 15px 5%;width:100%;}} .fiaZzq pre + p{margin-top:30px;} .fiaZzq ol{margin-left:30px;} @media all and (max-width:600px){.fiaZzq ol{width:90%;margin:0 auto 0 30px;}} @media (prefers-color-scheme:dark){.fiaZzq ol{color:#fff;}} .fiaZzq ol li{list-style-type:decimal;} .fiaZzq ul li{list-style-type:square;margin-left:40px;} @media all and (max-width:600px){.fiaZzq ul li{width:90%;margin:0 auto;}} @media (prefers-color-scheme:dark){.fiaZzq ul li{color:#fff;}} .fiaZzq h1,.fiaZzq h2,.fiaZzq h3,.fiaZzq h4,.fiaZzq h5,.fiaZzq h6{width:100%;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;margin-bottom:10px;margin-top:40px;} @media all and (max-width:600px){.fiaZzq h1,.fiaZzq h2,.fiaZzq h3,.fiaZzq h4,.fiaZzq h5,.fiaZzq h6{width:90%;margin:40px auto 10px auto;}} @media (prefers-color-scheme:dark){.fiaZzq h1,.fiaZzq h2,.fiaZzq h3,.fiaZzq h4,.fiaZzq h5,.fiaZzq h6{color:#fff;}} .fiaZzq h1{font-size:28px;} .fiaZzq h2{font-size:24px;} .fiaZzq h3{font-size:20px;} .fiaZzq em{font-style:italic;} .fiaZzq strong{font-weight:bold;}
/* sc-component-id: EndButtons__Container-sc-1rt8k5q-0 */
.jmGPXo{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:horizontal;-ms-flex-direction:horizontal;flex-direction:horizontal;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-top:40px;font-family:"Merriweather",serif;} @media (prefers-color-scheme:dark){.jmGPXo{color:#fff;}}
/* sc-component-id: Disqus__Wrapper-sc-15q2k8t-0 */
.dXIkuv{margin-top:40px;}
/* sc-component-id: BlogPageLayout__Container-sc-1pnb15k-0 */
@media (prefers-color-scheme:dark){.kZJxiO{background-color:#23282f;}}
/* sc-component-id: BlogPageLayout__NonContent-sc-1pnb15k-1 */
@media all and (max-width:600px){.bDzSYv{padding-right:5%;padding-left:5%;}}
/* sc-component-id: BlogPageLayout__PostContainerOuter-sc-1pnb15k-4 */
.jtmfVw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding:0;} @media all and (max-width:1200px){.jtmfVw{padding:0;}}
/* sc-component-id: BlogPageLayout__PostContainerInner-sc-1pnb15k-5 */
.gablWf{display:block;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}
/* sc-component-id: BlogPageLayout__MyTag-sc-1pnb15k-8 */
.fecpOA{position:relative;} @media all and (min-width:600px){.fecpOA{margin-left:-50px;padding-left:50px;}}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog: Apple Platform Development" href="/blog/apple.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog: iOS" href="/blog/ios.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog: Web" href="/blog/web.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog" href="/blog/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-ca5d89e5047a55ed27c3.js"/><link as="script" rel="preload" href="/styles-c1c07cf25e5f354e4d8e.js"/><link as="script" rel="preload" href="/app-41bf133523e562b7251f.js"/><link as="script" rel="preload" href="/commons-3e6dfaab6d1d44869a85.js"/><link as="script" rel="preload" href="/component---src-pages-blog-swiftui-self-sizing-cells-mdx-2ce5a6cdd7aefab53ed0.js"/><link as="fetch" rel="preload" href="/page-data/blog/swiftui-self-sizing-cells/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="BlogPageLayout__Container-sc-1pnb15k-0 kZJxiO"><nav class="Nav__StyledNav-sc-17txzo8-0 inkKqg"><div class="Nav__Title-sc-17txzo8-1 ihgmJg"><a href="/blog" class="default__A-phsh4y-5 Nav__StyledA-sc-17txzo8-4 glYDzJ">NOAH GILMORE</a></div><ul class="default__UL-phsh4y-2 Nav__NavLinks-sc-17txzo8-2 jjWRSm"><li title="Site Home" class="default__LI-phsh4y-3 Nav__NavLink-sc-17txzo8-3 bkeDie"><a aria-label="Home" href="/" class="default__A-phsh4y-5 Nav__StyledA-sc-17txzo8-4 glYDzJ"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M258.5 104.1c-1.5-1.2-3.5-1.2-5 0l-156 124.8c-.9.8-1.5 1.9-1.5 3.1v230c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V322c0-1.1.9-2 2-2h92c1.1 0 2 .9 2 2v140c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V232c0-1.2-.6-2.4-1.5-3.1l-156-124.8z"></path><path d="M458.7 204.2l-189-151.4C265.9 49.7 261 48 256 48s-9.9 1.7-13.7 4.8L160 119.7V77.5c0-1.1-.9-2-2-2H98c-1.1 0-2 .9-2 2v92.2l-42.7 35.1c-3.1 2.5-5.1 6.2-5.3 10.2-.2 4 1.3 7.9 4.1 10.7 2.6 2.6 6.1 4.1 9.9 4.1 3.2 0 6.3-1.1 8.8-3.1l183.9-148c.5-.4.9-.4 1.3-.4s.8.1 1.3.4l183.9 147.4c2.5 2 5.6 3.1 8.8 3.1 3.7 0 7.2-1.4 9.9-4.1 2.9-2.8 4.4-6.7 4.2-10.7-.3-4-2.2-7.7-5.4-10.2z"></path></svg></a></li><li title="Twitter" class="default__LI-phsh4y-3 Nav__NavLink-sc-17txzo8-3 bkeDie"><a aria-label="Twitter" href="https://twitter.com/noahsark769" class="default__A-phsh4y-5 Nav__StyledA-sc-17txzo8-4 glYDzJ"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li title="GitHub" class="default__LI-phsh4y-3 Nav__NavLink-sc-17txzo8-3 bkeDie hidden md:flex"><a aria-label="GitHub" href="https://github.com/noahsark769" class="default__A-phsh4y-5 Nav__StyledA-sc-17txzo8-4 glYDzJ"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9 1.4.3 2.6.4 3.8.4 8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1-8.4 1.9-15.9 2.7-22.6 2.7-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1 10.5 0 20-3.4 25.6-6 2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8 0 0 1.6-.5 5-.5 8.1 0 26.4 3.1 56.6 24.1 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 30.2-21 48.5-24.1 56.6-24.1 3.4 0 5 .5 5 .5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5 1.2 0 2.6-.1 4-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"></path></svg></a></li><li title="App Store" class="default__LI-phsh4y-3 Nav__NavLink-sc-17txzo8-3 bkeDie"><a aria-label="App Store" href="https://apps.apple.com/us/app/cifilter-io/id1457458557" class="default__A-phsh4y-5 Nav__StyledA-sc-17txzo8-4 glYDzJ"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm-78.9 296.9c-2.7 4.6-7.5 7.1-12.5 7.1-2.5 0-5-.6-7.3-2-6.9-4-9.2-12.8-5.2-19.7l14.2-23.6c1.5-2.5 4.1-4 7-4h2.1c10.3 0 17.5 6.2 19.6 12.2l-17.9 30zm120.2-46.4l-93 .1h-61.8c-8.2 0-14.8-6.8-14.4-15 .3-7.8 7.1-13.7 14.9-13.7h44.8l53.1-90.4-17.2-29.3c-3.9-6.7-2.2-15.5 4.4-19.7 7-4.5 16.2-2.2 20.3 4.8l9.2 15.7h.1l9.2-15.7c4.1-7 13.4-9.3 20.3-4.8 6.6 4.2 8.3 13 4.4 19.7l-17.2 29.3-16.7 28.5-36.3 61.9v.1h53.5c6.7 0 15.1 3.6 18.5 9.4l.3.6c3 5.1 4.7 8.6 4.7 13.7-.1 2.8-1.1 4.8-1.1 4.8zm72.2.1h-25.2v.1l18.4 31.3c4 6.8 2.1 15.8-4.8 20-2.3 1.4-4.9 2.1-7.5 2.1-5 0-9.8-2.6-12.5-7.1l-27.2-46.3-16.9-28.8-21.8-37.3c-6.4-10.9-6.7-24.5-.6-35.3 4.3-7.6 7.6-9.6 7.6-9.6l48.5 82.1h41.7c7.8 0 14.5 6 14.9 13.7.3 8.3-6.3 15.1-14.6 15.1z"></path></svg></a></li></ul></nav><div class="BlogPost__BlogPostContainer-tv75ut-0 hAFKjM"><div class="BlogPageLayout__PostContainerOuter-sc-1pnb15k-4 jtmfVw"><div class="BlogPageLayout__PostContainerInner-sc-1pnb15k-5 gablWf"><div class="BlogPageLayout__NonContent-sc-1pnb15k-1 bDzSYv"><div><div class="BlogPost__TitleContainer-tv75ut-1 iQPMaQ"><h1 class="BlogPost__Heading-tv75ut-2 cMmljL">Self-Sizing UITableView Cells with SwiftUI</h1><p class="BlogPost__DateContainer-tv75ut-4 ilthni">July 21, 2020</p></div></div></div><div class="MarkdownContent__Container-gk8834-0 fiaZzq"><blockquote><p>Update (9/16/2020): iOS 14 introduces issues related to keyboard safe area insets which basically make this approach invalid - it still works if your app is built with Xcode 11, but building with Xcode 12 will cause the cell layouts whose rects intersect with the keyboard rect to break. For more information see <a href="https://twitter.com/noahsark769/status/1305999564990750720">this tweet</a>, the <a href="https://developer.apple.com/forums/thread/658432">developer forums post with no response</a>, and feedbacks FB8305409, FB8240609, and FB8176223. Unfortunately, based on this, I don&#x27;t think I can recommend taking this approach for writing table cells anymore, but it&#x27;s still a great exercise in understanding how SwiftUI and UIKit interop work. If anything changes about this, I&#x27;ll try my best to update this post with new information.</p></blockquote><blockquote><p>Update (9/18/2020): The issues detailed in the above update <a href="https://twitter.com/zntfdr/status/1306913858263552001?s=20">seem to be resolved</a> as of Xcode 12.2 beta 1. I&#x27;ve created <a href="https://github.com/noahsark769/UIHostingControllerAvoidanceExample">UIHostingControllerAvoidanceExample</a>, which is a simpler reproduction case of the issues which existed before. However, as <a href="https://twitter.com/NathanBLawrence">Nathan Lawrence</a> details in <a href="https://twitter.com/NathanBLawrence/status/1307091446739107848">this great Twitter thread</a>, there are other reasons to be careful about taking this approach in production apps. I posted a <a href="https://twitter.com/noahsark769/status/1307094916724600838?s=20">Tweet</a> with more of my thoughts on it, but if you try to embed SwiftUI content inside your table view cells, be prepared to hack around issues - they&#x27;ll surely continue to crop up as SwiftUI matures.</p></blockquote><blockquote><p>Update (10/15/2020): Just wanted to note so this post has up to date information - the issue still happens in the Xcode 12.1 GM build. Looks like we&#x27;ll have to wait until Xcode 12.2.</p></blockquote><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="300" class="CaptionedImage__Container-owr0zk-1 bSsiAj"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:98.27586206896551%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAADiElEQVQ4y6WVz28TRxTHF5UmAolDpXLjgCJxgns5cayoUKUi+oND/4JIoBIUoA2UQ3sAipA4cWkVlUIPPSAUckx/SBFRSAhxbBSbOv6RNHZMvN6f3h+zOzvfvpmxa0WoSIiRPnpvZ2e+82bm7VsjiiLU63U0Gg00m01sbGwov1ar4U2bEAJGHMdKRApsbW1hbW0NrVYL5b/LkO/SNAVjCTjnSJKEfKaIY7bjWY6TzYjiCI7rwPM92I4N1/MJT9GxbLRNE9ttk8a4aLfb8H0f3W5XEYYBgoD8QPtKkIW0eiiQhhmSMAWnqHhEkREiSZWfUYSCYCH5vL+/V5HvDN93sWlVFB3nJdabPqpNFzWi2tBWUtl0YXZcxI6JSNFBaJuIXbK9PkZaxqz5F47OfY4PnpzEd4VpHPge2D0RY++VFHt67LuawhjnGJtm2Kw+R76wgvX1KvL5ZZTLJVQqL5DLLaHTrsCY2Z7ByOwJHHz8IS7mprD/KoV9kWPX12QvaXZ/Q/Yr4OwU8E+liPmFp3R5FSwuLqKQL6BUeoG5uXm0GmUYRXsZE/nr+Hb1GiaLS3hPCl7iJCLwTo/hy5QO54HRBzHMZo0uyEdI6ebTxUhk6jkOHUfYhoEnfwBffAJ8egLlnx9h6Bqw6wInIfzH0AQJjgFnHlJqMK+fdKBc0vRb5sEQMw+QHj4AHHofxVs/YvgmCY6nOwSHL1PU5wTOTevrlRknfvsVgoIQX56CyD3TF53YJLjwO7LTHwOfHUfp7hT23qAzoy0PTUDxLrHnio5wbFpOozSTk2//ADGyHzhyEJj9U0fILNoy95ClTK282qKJ40JFY5yXIj0r+0YFRh9KwVQL3p8EPjoGnDwOLC1oQRUh9+k4MvXsRMC9ZeDuM80vxE+LwORT4M488LjeOyrSlVMEzzSil9sUHEXo0MsuIaN8lYQzVEwGN2JYt6lP9KCtD5B9ZDltOWMUFqfvMNXwJARn2rLQQxJ5iAKPUkL7Gd1yFv8PzIcRuJRbL13YbR+WZNtTdKgvpbUkPN5pXweVr4gyvYhiaRW1ehWF53llV1Zy4JlKEDqzTFnyBohM9fT9foUwYqom3W5AZakLj0qXRD5La9sOLCphnY6lypZlWfRFOMrKfvl1ODRGjnNdr1cPSVBOsO3BRC3sUY0LlZWLBYFeZNA3WDwIQvWsBGVVloP7Ub5Nk7+AfwFet5mHFFq3CgAAAABJRU5ErkJggg==" alt="Screenshot of SwiftUI table view cells displayed in the sample app." style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/3b19d05d879dcf56bb3a6d44a1555e7f/59d48/swiftuicell-1.png 150w,
/static/3b19d05d879dcf56bb3a6d44a1555e7f/c6a2b/swiftuicell-1.png 300w,
/static/3b19d05d879dcf56bb3a6d44a1555e7f/78d2a/swiftuicell-1.png 600w,
/static/3b19d05d879dcf56bb3a6d44a1555e7f/efa0c/swiftuicell-1.png 696w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/3b19d05d879dcf56bb3a6d44a1555e7f/59d48/swiftuicell-1.png 150w,
/static/3b19d05d879dcf56bb3a6d44a1555e7f/c6a2b/swiftuicell-1.png 300w,
/static/3b19d05d879dcf56bb3a6d44a1555e7f/78d2a/swiftuicell-1.png 600w,
/static/3b19d05d879dcf56bb3a6d44a1555e7f/efa0c/swiftuicell-1.png 696w" src="/static/3b19d05d879dcf56bb3a6d44a1555e7f/78d2a/swiftuicell-1.png" alt="Screenshot of SwiftUI table view cells displayed in the sample app." style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX">If you want to build these cells in SwiftUI, this is the post for you</div></div></div><p>It&#x27;s been a year since SwiftUI was released, and many iOS developers who are lucky to only support the two most current iOS versions will soon be able to start writing SwiftUI in their production apps. There are clear benefits to using SwiftUI (I could probably devote a whole post to them), but the question I&#x27;ve been thinking about lately is: where to start?</p><p>We won&#x27;t be rewriting everything in SwiftUI, at least not yet. But are there places in our apps where we can try it out, familiarize our team with it, and set ourselves up for more investment in SwiftUI going forward?</p><p>One area that keeps popping into my head for this is <code>UITableView</code> cells. At work, most of our app is composed of table views managed by <a href="https://github.com/plangrid/ReactiveLists">ReactiveLists</a>, usually displaying lists of data models or details about a model. Lots of times we use <code>UITableViewCell</code> out of the box, but occasionally the cells are more complicated - we need a tertiary label, or a certain highlight state, or a custom view in the cell. Our current practice is to use XIBs for these cells, but I&#x27;ve been wondering whether we could start writing them in SwiftUI instead.</p><p>To test this out, I re-wrote the list cells from <a href="https://apps.apple.com/us/app/cifilter-io/id1457458557">CIFilter.io</a> as SwiftUI views inside of self-sizing <code>UITableViewCell</code>s. In this post I&#x27;ll talk about how to implement a self-sizing cell setup with SwiftUI, so you don&#x27;t have to run into the same roadblocks I did.</p><blockquote><p>Sample code for this article is available <a href="https://github.com/noahsark769/NGSwiftUITableCellSizing">here</a>. If you&#x27;re just looking for a <code>UITableViewCell</code> subclass which you can drop a SwiftUI view into, skip to the bottom of this post 👇</p></blockquote><h2 id="self-sizing-cells" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">Self Sizing Cells</h2><p>Self Sizing <code>UITableViewCell</code>s are a concept that pretty much every iOS developer I know has struggled with. There&#x27;s <a href="https://www.raywenderlich.com/8549-self-sizing-table-view-cells">an</a> <a href="https://pspdfkit.com/blog/2018/self-sizing-table-view-cells/">absolutely</a> <a href="https://medium.com/@vhart/self-sizing-tableview-cells-a165086d8631">huge</a> <a href="https://useyourloaf.com/blog/self-sizing-table-view-cells/">amount</a> <a href="https://useyourloaf.com/blog/self-sizing-table-view-cells-in-interface-builder/">of</a> <a href="https://fluffy.es/dynamic-height-tableview-cell/">writing</a> online about what they are and how to configure them.</p><p>Historically, you defined the height of a table view cell using the <code>tableView(_:heightForRowAt:)</code> method of your table view&#x27;s delegate. This works well for standard cells, but once we have cells which use dynamic data, custom views, or views whose height are dependent on their width (like labels), calculating the height up front got very complicated.</p><p>So in iOS 5, the idea of a self-sizing table view cell was introduced. If you specify <code>UITableView.automaticDimension</code> from <code>tableView(_:heightForRowAt:)</code>, <code>UITableView</code> will calculate the cell&#x27;s height based on its autolayout constraints, so you don&#x27;t have to define the height yourself. This is really useful for custom cell layouts and dynamic text adjustments, and Apple even has a <a href="https://developer.apple.com/documentation/uikit/uifont/creating_self-sizing_table_view_cells">sample project</a> demonstrating how to use self-sizing cells to adapt to dynamic type.</p><p>However, it can be hard to get the setup right when working with self-sizing cells. I can&#x27;t count the number of times I&#x27;ve struggled with implementing a custom cell, then later in the table view seeing it reused with the wrong height, and trying every combination of <code>setNeedsLayout</code>, <code>layoutIfNeeded</code>, <code>setNeedsUpdateConstraints</code>, <code>invalidateIntrinsicContentSize</code>, etc to no avail. I&#x27;m pretty sure <a href="https://stackoverflow.com/questions/47949185/self-sizing-table-view-with-different-constraint">the</a> <a href="https://stackoverflow.com/questions/38230195/adjusting-tableview-height-while-using-self-sizing-cells-and-a-non-scrollable-ta">number</a> <a href="https://stackoverflow.com/questions/50780893/how-make-custom-uitableviewcell-with-dynamic-height">of</a> <a href="https://stackoverflow.com/questions/42416733/self-sizing-tableview-cells-based-on-two-subviews-height">stackoverflow</a> <a href="https://stackoverflow.com/questions/44359185/self-sizing-tableview">questions</a> <a href="https://stackoverflow.com/questions/35712724/self-sizing-cells-and-dynamic-size-controls-for-ios">about</a> <a href="https://stackoverflow.com/questions/31979932/ios8-self-sizing-static-tableview-cells-with-interface-builder/45168279">this</a> is approaching uncountable. In this article we&#x27;ll go over the correct incantation to make this setup work.</p><h2 id="goals" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">Goals</h2><p>The cells we&#x27;re going to look at defining in SwiftUI will demonstrate how complicated dependent cell layouts can be. We&#x27;ll start with the classic example: two labels, two different font sizes, each one wrapping onto the next line if it&#x27;s long enough. We&#x27;ll use a string with variable number of repetitions for the text, and throw in a <code>Rectangle</code> to show the cell&#x27;s full height, for good measure:</p><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="400" class="CaptionedImage__Container-owr0zk-1 iKttdc"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:25.925925925925924%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAp0lEQVQY05VQyw6EMAjc//9GPWn1oLXWqn0ZZx3cmuxREjIM0Cnw8d5DKYWu68T7vn/4WzvPE58QApqmRVVVaFuFuq5FkDzGiJQycs44juOKkzg583cuS45iNBFcFod932HtAucctm3Duq4wZsY0GWitMc8W46gvPgmnl/owDKDOTzBKUykS+VBr5sz1iZVm74Mgp+aZGBdO5JSPIFe410t/ccE3N/wCL6uDo3d3xIsAAAAASUVORK5CYII=" alt="Screenshot of the cell with two labels, each wrapping onto the next line, stacked on top of each other" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/0c35042ccd1ca7849fcdc6c63e277723/59d48/swiftuicell-2.png 150w,
/static/0c35042ccd1ca7849fcdc6c63e277723/c6a2b/swiftuicell-2.png 300w,
/static/0c35042ccd1ca7849fcdc6c63e277723/78d2a/swiftuicell-2.png 600w,
/static/0c35042ccd1ca7849fcdc6c63e277723/fd9ce/swiftuicell-2.png 702w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/0c35042ccd1ca7849fcdc6c63e277723/59d48/swiftuicell-2.png 150w,
/static/0c35042ccd1ca7849fcdc6c63e277723/c6a2b/swiftuicell-2.png 300w,
/static/0c35042ccd1ca7849fcdc6c63e277723/78d2a/swiftuicell-2.png 600w,
/static/0c35042ccd1ca7849fcdc6c63e277723/fd9ce/swiftuicell-2.png 702w" src="/static/0c35042ccd1ca7849fcdc6c63e277723/78d2a/swiftuicell-2.png" alt="Screenshot of the cell with two labels, each wrapping onto the next line, stacked on top of each other" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX">Our double-label cell</div></div></div><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">struct</span><span class="mtk1"> </span><span class="mtk10">CellView</span><span class="mtk1">: View {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">let</span><span class="mtk1"> content: </span><span class="mtk10">String</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">let</span><span class="mtk1"> numberOfRepetitions: </span><span class="mtk10">Int</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">var</span><span class="mtk1"> body: some View {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk11">HStack</span><span class="mtk1">(</span><span class="mtk11">alignment</span><span class="mtk1">: .</span><span class="mtk12">center</span><span class="mtk1">, </span><span class="mtk11">spacing</span><span class="mtk1">: </span><span class="mtk7">10</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">Rectangle</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                .</span><span class="mtk11">fill</span><span class="mtk1">(</span><span class="mtk11">Color</span><span class="mtk1">(.</span><span class="mtk12">opaqueSeparator</span><span class="mtk1">))</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                .</span><span class="mtk11">frame</span><span class="mtk1">(</span><span class="mtk11">width</span><span class="mtk1">: </span><span class="mtk7">2</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">VStack</span><span class="mtk1">(</span><span class="mtk11">alignment</span><span class="mtk1">: .</span><span class="mtk12">leading</span><span class="mtk1">, </span><span class="mtk11">spacing</span><span class="mtk1">: </span><span class="mtk7">4</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                </span><span class="mtk11">Text</span><span class="mtk1">(</span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">content</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    .</span><span class="mtk11">lineLimit</span><span class="mtk1">(</span><span class="mtk4">nil</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                </span><span class="mtk11">Text</span><span class="mtk1">(</span><span class="mtk10">String</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    </span><span class="mtk11">repeating</span><span class="mtk1">: content + </span><span class="mtk8">&quot; &quot;</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    </span><span class="mtk11">count</span><span class="mtk1">: numberOfRepetitions</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                ))</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                .</span><span class="mtk11">font</span><span class="mtk1">(.</span><span class="mtk12">caption</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                .</span><span class="mtk11">foregroundColor</span><span class="mtk1">(</span><span class="mtk11">Color</span><span class="mtk1">(.</span><span class="mtk12">secondaryLabel</span><span class="mtk1">))</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                .</span><span class="mtk11">lineLimit</span><span class="mtk1">(</span><span class="mtk4">nil</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            .</span><span class="mtk11">padding</span><span class="mtk1">([.</span><span class="mtk12">top</span><span class="mtk1">, .</span><span class="mtk12">bottom</span><span class="mtk1">], </span><span class="mtk7">10</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">Spacer</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        .</span><span class="mtk11">padding</span><span class="mtk1">([.</span><span class="mtk12">leading</span><span class="mtk1">, .</span><span class="mtk12">trailing</span><span class="mtk1">], </span><span class="mtk7">10</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>Now let&#x27;s consider a more complicated cell: this one has SwiftUI layouts, views which expand to fill available space, an embedded button, and let&#x27;s just throw another multiline label in there for fun!</p><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="400" class="CaptionedImage__Container-owr0zk-1 iKttdc"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:57.714285714285715%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACWElEQVQoz22S3UsUURiHBzKrvyAjw/ADJKPCiOq2yy76G+xGISIytESTROxjI4uUEqKLJIok8iowChTqppQw3XVt1bZd3UJXTWfWj92dOefpnZmNLB3mmfObd877O+955xisg8eahqwIO70ZR8ikUWu2jMobdVoJjh8TrdYdsisK4/pkOy2TAXoTb2nuS3P2pUnNK4vqHDW9FlU9Fm39qywko8SiQRbmvzMTD/MzEWF+zo8lZyfRagWjbOA0hQOnuPDlEQWtYJwXaoWLOVx9DsruwnR8mo+fhohGY4yMBD1cPTj4mcjXMCq7jHFytJrKYBVNUz1U3JHkBoedVzU7cuxq1hiXFce7YGY6TigUIpFIMDURYWJ8XKqcIRweJx6bEkMTI/wsQOTpDULv+ylyDesVeY2abY14bG8SwzpNZadbYQytpddbXo7cFgbHDkJFMcutt9jXIYZ1zmbDejjS4RppvOfSEvpdH/rNa/RY0I/Jj9OuoX20FMr3kGxpo6jTrdAhX0zyxMwlv8mNSYWyGMrxk0eH0YdL0KUF6GsNfiy75huqF93w/AnJD0PsDkjyJanoits3fFxdqzlwb4PhyDAcKoaS3SCG3iWG3pZVrgOL0oITDxR7b2qKb2v2B/yxvF1TKLEz3a6V8g3nZuHxQ+i6D9J7v4Vp31DbWRFaFtekMmClfVZEz6ZgbA6+LcLEvJx/28/V/6NdHH/LqCV5swRTPv2LbZvEFk2SlsmPZZOMHAtvrpIx+8vHzuUr0TqFkbEy/CG9EdOP6dUMjpSrhGzq79wtSTn8Boe+LLzSu+stAAAAAElFTkSuQmCC" alt="Screenshot of the the complicated cell, with purple and yellow borders, blue, green, and red rectangles, and a button that says &#x27;Tap Me!&#x27;" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/7d83d2eff90d55433bf3b3c785d8b2cd/59d48/swiftuicell-3.png 150w,
/static/7d83d2eff90d55433bf3b3c785d8b2cd/c6a2b/swiftuicell-3.png 300w,
/static/7d83d2eff90d55433bf3b3c785d8b2cd/78d2a/swiftuicell-3.png 600w,
/static/7d83d2eff90d55433bf3b3c785d8b2cd/7b604/swiftuicell-3.png 700w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/7d83d2eff90d55433bf3b3c785d8b2cd/59d48/swiftuicell-3.png 150w,
/static/7d83d2eff90d55433bf3b3c785d8b2cd/c6a2b/swiftuicell-3.png 300w,
/static/7d83d2eff90d55433bf3b3c785d8b2cd/78d2a/swiftuicell-3.png 600w,
/static/7d83d2eff90d55433bf3b3c785d8b2cd/7b604/swiftuicell-3.png 700w" src="/static/7d83d2eff90d55433bf3b3c785d8b2cd/78d2a/swiftuicell-3.png" alt="Screenshot of the the complicated cell, with purple and yellow borders, blue, green, and red rectangles, and a button that says 'Tap Me!'" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX">Complicated cell</div></div></div><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">struct</span><span class="mtk1"> </span><span class="mtk10">ComplicatedCellView</span><span class="mtk1">: View {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">let</span><span class="mtk1"> value: </span><span class="mtk10">Int</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">var</span><span class="mtk1"> body: some View {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        VStack {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            HStack {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                VStack {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    </span><span class="mtk11">Rectangle</span><span class="mtk1">().</span><span class="mtk11">fill</span><span class="mtk1">(Color.</span><span class="mtk12">green</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                        .</span><span class="mtk11">frame</span><span class="mtk1">(</span><span class="mtk11">width</span><span class="mtk1">: </span><span class="mtk7">50</span><span class="mtk1">, </span><span class="mtk11">height</span><span class="mtk1">: </span><span class="mtk7">50</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    </span><span class="mtk11">Rectangle</span><span class="mtk1">().</span><span class="mtk11">fill</span><span class="mtk1">(Color.</span><span class="mtk12">red</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                        .</span><span class="mtk11">frame</span><span class="mtk1">(</span><span class="mtk11">width</span><span class="mtk1">: </span><span class="mtk7">50</span><span class="mtk1">, </span><span class="mtk11">height</span><span class="mtk1">: </span><span class="mtk7">50</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    </span><span class="mtk11">Spacer</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                }.</span><span class="mtk11">frame</span><span class="mtk1">(</span><span class="mtk11">minHeight</span><span class="mtk1">: </span><span class="mtk7">100</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                </span><span class="mtk11">Rectangle</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    .</span><span class="mtk11">fill</span><span class="mtk1">(Color.</span><span class="mtk12">blue</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    .</span><span class="mtk11">frame</span><span class="mtk1">(</span><span class="mtk11">minWidth</span><span class="mtk1">: </span><span class="mtk7">100</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                VStack {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    </span><span class="mtk11">Text</span><span class="mtk1">(</span><span class="mtk10">String</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                        </span><span class="mtk11">repeating</span><span class="mtk1">: </span><span class="mtk8">&quot;Value &quot;</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                        </span><span class="mtk11">count</span><span class="mtk1">: value % </span><span class="mtk7">40</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    ) + </span><span class="mtk8">&quot;</span><span class="mtk4">\(</span><span class="mtk1">value % </span><span class="mtk7">40</span><span class="mtk4">)</span><span class="mtk8">&quot;</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                        .</span><span class="mtk11">lineLimit</span><span class="mtk1">(</span><span class="mtk4">nil</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    </span><span class="mtk11">Rectangle</span><span class="mtk1">().</span><span class="mtk11">fill</span><span class="mtk1">(Color.</span><span class="mtk12">red</span><span class="mtk1">).</span><span class="mtk11">frame</span><span class="mtk1">(</span><span class="mtk11">width</span><span class="mtk1">: </span><span class="mtk7">50</span><span class="mtk1">, </span><span class="mtk11">height</span><span class="mtk1">: </span><span class="mtk7">50</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                    </span><span class="mtk11">Spacer</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">Button</span><span class="mtk1">(</span><span class="mtk11">action</span><span class="mtk1">: {}, </span><span class="mtk11">label</span><span class="mtk1">: {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                </span><span class="mtk11">Text</span><span class="mtk1">(</span><span class="mtk8">&quot;Tap me!&quot;</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            }).</span><span class="mtk11">padding</span><span class="mtk1">(.</span><span class="mtk12">bottom</span><span class="mtk1">, </span><span class="mtk7">5</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        .</span><span class="mtk11">border</span><span class="mtk1">(Color.</span><span class="mtk12">yellow</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        .</span><span class="mtk11">padding</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        .</span><span class="mtk11">frame</span><span class="mtk1">(</span><span class="mtk11">minHeight</span><span class="mtk1">: </span><span class="mtk7">0</span><span class="mtk1">, </span><span class="mtk11">maxHeight</span><span class="mtk1">: .</span><span class="mtk12">infinity</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        .</span><span class="mtk11">border</span><span class="mtk1">(Color.</span><span class="mtk12">purple</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>Our goal will be to correctly embed these views in cells such that:</p><ol><li>The cell gets its height from the layout</li><li>The cells get properly reused with the correct height</li><li>The table view maintains performant scrolling</li></ol><h2 id="sizethatfits" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">sizeThatFits</h2><p>Whenever I have to implement a custom self-sizing table view cell, I find myself returning to <a href="https://pspdfkit.com/blog/2018/self-sizing-table-view-cells/#:~:text=Self%2Dsizing%20cells%20in%20UITableView,the%20size%20of%20each%20cell.">this excellent post</a> by <a href="https://twitter.com/qdoug">Douglas Hill</a>. One approach mentioned in that article is to just override <code>sizeThatFits</code> and <code>layoutSubviews</code> in the cell subclass - this is a brute force approach, but it&#x27;s the first one I tried. Let&#x27;s see what this looks like when we wrap a <code>UIHostingController</code> that contains our SwiftUI view:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk3">// Note: This isn&#x27;t the best way to implement a hosting cell.</span></span>
<span class="vscode-highlight-line"><span class="mtk3">// See later in the post for a better method</span></span>
<span class="vscode-highlight-line"><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk4">class</span><span class="mtk1"> </span><span class="mtk10">HostingCell</span><span class="mtk1">&lt;</span><span class="mtk4">Content</span><span class="mtk1">: </span><span class="mtk10">View</span><span class="mtk1">&gt;: UITableViewCell {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">let</span><span class="mtk1"> hostingController = UIHostingController&lt;Content?&gt;(</span><span class="mtk11">rootView</span><span class="mtk1">: </span><span class="mtk4">nil</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">style</span><span class="mtk1">: UITableViewCell.CellStyle, </span><span class="mtk11">reuseIdentifier</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">?) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">super</span><span class="mtk1">.</span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">style</span><span class="mtk1">: style, </span><span class="mtk11">reuseIdentifier</span><span class="mtk1">: reuseIdentifier)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">backgroundColor</span><span class="mtk1"> = .</span><span class="mtk12">clear</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">sizeThatFits</span><span class="mtk1">(</span><span class="mtk11">_</span><span class="mtk1"> </span><span class="mtk12">size</span><span class="mtk1">: CGSize) -&gt; CGSize {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> hostingController.</span><span class="mtk11">sizeThatFits</span><span class="mtk1">(</span><span class="mtk11">in</span><span class="mtk1">: size)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">layoutSubviews</span><span class="mtk1">() {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">super</span><span class="mtk1">.</span><span class="mtk11">layoutSubviews</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">frame</span><span class="mtk1">.</span><span class="mtk12">size</span><span class="mtk1"> = </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk11">sizeThatFits</span><span class="mtk1">(bounds.</span><span class="mtk12">size</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">set</span><span class="mtk1">(</span><span class="mtk11">rootView</span><span class="mtk1">: Content) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">hostingController</span><span class="mtk1">.</span><span class="mtk12">rootView</span><span class="mtk1"> = rootView</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">if</span><span class="mtk1"> !</span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">subviews</span><span class="mtk1">.</span><span class="mtk11">contains</span><span class="mtk1">(hostingController.</span><span class="mtk12">view</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk11">addSubview</span><span class="mtk1">(hostingController.</span><span class="mtk12">view</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>We&#x27;re taking advantage of the fact that <code>UIHostingController</code> defines a <a href="https://developer.apple.com/documentation/swiftui/uihostingcontroller/sizethatfits(in:)">sizeThatFits</a> method, and we&#x27;re taking that exact size and using it to manually layout the cell&#x27;s subviews.</p><p>Our table view delegate method will dequeue the cell, generate a view with repetitions based on the index path, and set that view on the cell. For demo purposes, we&#x27;ll put a complicated cell every 6th row:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">tableView</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk11">_</span><span class="mtk1"> </span><span class="mtk12">tableView</span><span class="mtk1">: UITableView,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk11">cellForRowAt</span><span class="mtk1"> </span><span class="mtk12">indexPath</span><span class="mtk1">: IndexPath</span></span>
<span class="vscode-highlight-line"><span class="mtk1">) -&gt; UITableViewCell {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk15">if</span><span class="mtk1"> indexPath.</span><span class="mtk12">row</span><span class="mtk1"> % </span><span class="mtk7">6</span><span class="mtk1"> == </span><span class="mtk7">0</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">let</span><span class="mtk1"> cell = tableView.</span><span class="mtk11">dequeueReusableCell</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">withIdentifier</span><span class="mtk1">: </span><span class="mtk8">&quot;HostingCell&lt;ComplicatedCellView&gt;&quot;</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">for</span><span class="mtk1">: indexPath</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        ) as! HostingCell&lt;ComplicatedCellView&gt;</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        cell.</span><span class="mtk12">set</span><span class="mtk1">(</span><span class="mtk11">rootView</span><span class="mtk1">: </span><span class="mtk11">ComplicatedCellView</span><span class="mtk1">(</span><span class="mtk11">value</span><span class="mtk1">: indexPath.</span><span class="mtk12">row</span><span class="mtk1">))</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> cell</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    } </span><span class="mtk15">else</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">let</span><span class="mtk1"> cell = tableView.</span><span class="mtk11">dequeueReusableCell</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">withIdentifier</span><span class="mtk1">: </span><span class="mtk8">&quot;HostingCell&lt;CellView&gt;&quot;</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">for</span><span class="mtk1">: indexPath</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        ) as! HostingCell&lt;CellView&gt;</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        cell.</span><span class="mtk12">set</span><span class="mtk1">(</span><span class="mtk11">rootView</span><span class="mtk1">: </span><span class="mtk11">CellView</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">content</span><span class="mtk1">: </span><span class="mtk8">&quot;Title Title Title &quot;</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">numberOfRepetitions</span><span class="mtk1">: indexPath.</span><span class="mtk12">row</span><span class="mtk1"> % </span><span class="mtk7">20</span><span class="mtk1"> + </span><span class="mtk7">1</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        ))</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> cell</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>Run the app and...</p><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="400" class="CaptionedImage__Container-owr0zk-1 iKttdc"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:184.9236641221374%"></div><img src="data:image/png;base64,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" alt="Screenshot of the iOS simulator with the layouts not working - each complicated layout is rendered over the other cells, and the label text doesn&#x27;t wrap" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/b93a2b115c49e50cadff74d1cd8b8130/59d48/swiftuicell-4.png 150w,
/static/b93a2b115c49e50cadff74d1cd8b8130/c6a2b/swiftuicell-4.png 300w,
/static/b93a2b115c49e50cadff74d1cd8b8130/78d2a/swiftuicell-4.png 600w,
/static/b93a2b115c49e50cadff74d1cd8b8130/273c9/swiftuicell-4.png 900w,
/static/b93a2b115c49e50cadff74d1cd8b8130/ae639/swiftuicell-4.png 1048w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/b93a2b115c49e50cadff74d1cd8b8130/59d48/swiftuicell-4.png 150w,
/static/b93a2b115c49e50cadff74d1cd8b8130/c6a2b/swiftuicell-4.png 300w,
/static/b93a2b115c49e50cadff74d1cd8b8130/78d2a/swiftuicell-4.png 600w,
/static/b93a2b115c49e50cadff74d1cd8b8130/273c9/swiftuicell-4.png 900w,
/static/b93a2b115c49e50cadff74d1cd8b8130/ae639/swiftuicell-4.png 1048w" src="/static/b93a2b115c49e50cadff74d1cd8b8130/78d2a/swiftuicell-4.png" alt="Screenshot of the iOS simulator with the layouts not working - each complicated layout is rendered over the other cells, and the label text doesn't wrap" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX">Yikes</div></div></div><p>Well, that&#x27;s not at all what we were expecting - the complicated cell isn&#x27;t getting the height set correctly at all, and none of the labels wrap.</p><p>After a couple minutes of scratching my head about this, I realized that <code>sizeThatFits</code> was returning 0 for the complicated cell - which actually makes sense, since its layout (<code>.frame(minHeight: 0, maxHeight: .infinity)</code>) doesn&#x27;t have a fixed height. To fix this, we can use the <a href="https://developer.apple.com/documentation/swiftui/view/fixedsize(horizontal:vertical:)">fixedSize</a> modifier to fix the view at its ideal size in the vertical direction. After adding <code>.fixedSize(horizontal: false, vertical: true)</code> to both our views, we get something that looks like what we want!</p><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="400" class="CaptionedImage__Container-owr0zk-1 iKttdc"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:184.9236641221374%"></div><img src="data:image/png;base64,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" alt="Screenshot of the iOS simulator in portrait orientation with the layouts working with their correct height" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/1e2048929902b75d5ce54ade9af3f826/59d48/swiftuicell-5.png 150w,
/static/1e2048929902b75d5ce54ade9af3f826/c6a2b/swiftuicell-5.png 300w,
/static/1e2048929902b75d5ce54ade9af3f826/78d2a/swiftuicell-5.png 600w,
/static/1e2048929902b75d5ce54ade9af3f826/273c9/swiftuicell-5.png 900w,
/static/1e2048929902b75d5ce54ade9af3f826/ae639/swiftuicell-5.png 1048w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/1e2048929902b75d5ce54ade9af3f826/59d48/swiftuicell-5.png 150w,
/static/1e2048929902b75d5ce54ade9af3f826/c6a2b/swiftuicell-5.png 300w,
/static/1e2048929902b75d5ce54ade9af3f826/78d2a/swiftuicell-5.png 600w,
/static/1e2048929902b75d5ce54ade9af3f826/273c9/swiftuicell-5.png 900w,
/static/1e2048929902b75d5ce54ade9af3f826/ae639/swiftuicell-5.png 1048w" src="/static/1e2048929902b75d5ce54ade9af3f826/78d2a/swiftuicell-5.png" alt="Screenshot of the iOS simulator in portrait orientation with the layouts working with their correct height" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX"></div></div></div><p>There&#x27;s one last issue though: like I said, using <code>sizeThatFits</code> is a brute force method. It doesn&#x27;t take into account any of the other things about the layout environment, like layout margins and safe area insets. In fact, if we turn the device sideways, we can see that the cell gets obscured by the notch:</p><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="500" class="CaptionedImage__Container-owr0zk-1 ylgnz"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:61.93058568329718%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACkklEQVQoz4WS3UtTcRjHjwmCLSYzt0bN12WWvVyUokS1cuf4MmZzYwMvlpFS5FWJkhsVFG2xUtQbc0j/QXdd12IzqJjo1iJ7gUqjLTbU49TGzvmd8/T7Hc/QROiBD9/fy3O+z5dzDkVRVJ6ZNjbaOttbW6xWmmm3M00mG3O2uZ0513xxJ2hDi8V4hjYbzQ4nfaX3prH76vVWs8XWSLwwJQV1tYfGq2tK5w5XHYscqdZHa/QV0aqyA1F9uS6qL9tGue7TwYrSrxW6/Z9Pnjg6R583xOpONXysbzj9BJsVUKRoY7P30djwau/YQLL7zkTK6ZpMdbl35pLLv+IcnFjrcvlXOwfG2Wt3/YujTyfTF5oMDym5FEO+4SgAD/c/jEKtH0DpAygZAti7heLHm0og97txnwH3w/Nn4Om/ESNexLDowfDIDPz8DuxlJ9Ld+yNSt0RxlwuJeYObbN/nu3iR6hfE+hEexW4PwnF95SzxIoZKj9c7g+eAwC6hWJyH8AIH05jwQlbStz84ePGFg3fzufMNffMtA/PrgF5Oh6FIpYooCwuVUkKv1ztLDJeWWLTOLgJwGbxDZMQmovDvXjrjyGMoFHgFGo0mQsJtJPR4pIS/Ewn0K54QV1bXgOMR8EiQQIIowcuaI8sjkRgGAgFQKBQRrVa7kdDn80kJl5eXOQzKZrNIEARESo66HWHLmkun0+BwOCK5d6jo6+ubkQ2BZVnIZDLA87ykiUQC4vE4JJNJSKVSwHEciKIIeKCkpI+U2+0mH2WP9N+o1eoek8k0ZbPZgh0dHUGsIbvdHsLrEMMwIZqmcwQtFstrq9X6Ht9Fcd8UThZsa2ubUqlUPdSWyscUYzT/QY3RYipl9snnxbIH9RcSFxfLkiVtLgAAAABJRU5ErkJggg==" alt="Screenshot of the iOS simulator in landscape orientation with complicated cell layout partially obscured by the device&#x27;s notch" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/3607688e2d7138140be8785844160110/59d48/swiftuicell-6.png 150w,
/static/3607688e2d7138140be8785844160110/c6a2b/swiftuicell-6.png 300w,
/static/3607688e2d7138140be8785844160110/78d2a/swiftuicell-6.png 600w,
/static/3607688e2d7138140be8785844160110/273c9/swiftuicell-6.png 900w,
/static/3607688e2d7138140be8785844160110/9911c/swiftuicell-6.png 1200w,
/static/3607688e2d7138140be8785844160110/8339e/swiftuicell-6.png 1844w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/3607688e2d7138140be8785844160110/59d48/swiftuicell-6.png 150w,
/static/3607688e2d7138140be8785844160110/c6a2b/swiftuicell-6.png 300w,
/static/3607688e2d7138140be8785844160110/78d2a/swiftuicell-6.png 600w,
/static/3607688e2d7138140be8785844160110/273c9/swiftuicell-6.png 900w,
/static/3607688e2d7138140be8785844160110/9911c/swiftuicell-6.png 1200w,
/static/3607688e2d7138140be8785844160110/8339e/swiftuicell-6.png 1844w" src="/static/3607688e2d7138140be8785844160110/78d2a/swiftuicell-6.png" alt="Screenshot of the iOS simulator in landscape orientation with complicated cell layout partially obscured by the device's notch" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX">Double yikes</div></div></div><p>At this point, I ended up giving up on this approach. It&#x27;s probably possible to take safe area into account here, but it&#x27;s not extensible. As we&#x27;ll see shortly, there&#x27;s a better way!</p><h2 id="autolayout" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">Autolayout</h2><p>The actual recommended way to implement self-sizing cells is with autolayout, so let&#x27;s try adapting our <code>HostingCell</code> to use constraints:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk4">class</span><span class="mtk1"> </span><span class="mtk10">HostingCell</span><span class="mtk1">&lt;</span><span class="mtk4">Content</span><span class="mtk1">: </span><span class="mtk10">View</span><span class="mtk1">&gt;: UITableViewCell {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">let</span><span class="mtk1"> hostingController = UIHostingController&lt;Content?&gt;(</span><span class="mtk11">rootView</span><span class="mtk1">: </span><span class="mtk4">nil</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">style</span><span class="mtk1">: UITableViewCell.CellStyle, </span><span class="mtk11">reuseIdentifier</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">?) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">super</span><span class="mtk1">.</span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">style</span><span class="mtk1">: style, </span><span class="mtk11">reuseIdentifier</span><span class="mtk1">: reuseIdentifier)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">backgroundColor</span><span class="mtk1"> = .</span><span class="mtk12">clear</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">set</span><span class="mtk1">(</span><span class="mtk11">rootView</span><span class="mtk1">: Content) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">hostingController</span><span class="mtk1">.</span><span class="mtk12">rootView</span><span class="mtk1"> = rootView</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">if</span><span class="mtk1"> !</span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">subviews</span><span class="mtk1">.</span><span class="mtk11">contains</span><span class="mtk1">(hostingController.</span><span class="mtk12">view</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk11">addSubview</span><span class="mtk1">(hostingController.</span><span class="mtk12">view</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk12">view</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                .</span><span class="mtk12">translatesAutoresizingMaskIntoConstraints</span><span class="mtk1"> = </span><span class="mtk4">false</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">leadingAnchor</span><span class="mtk1">.</span><span class="mtk11">constraint</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                </span><span class="mtk11">equalTo</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">leadingAnchor</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            ).</span><span class="mtk12">isActive</span><span class="mtk1"> = </span><span class="mtk4">true</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">trailingAnchor</span><span class="mtk1">.</span><span class="mtk11">constraint</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                </span><span class="mtk11">equalTo</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">trailingAnchor</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            ).</span><span class="mtk12">isActive</span><span class="mtk1"> = </span><span class="mtk4">true</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">topAnchor</span><span class="mtk1">.</span><span class="mtk11">constraint</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                </span><span class="mtk11">equalTo</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">topAnchor</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            ).</span><span class="mtk12">isActive</span><span class="mtk1"> = </span><span class="mtk4">true</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">bottomAnchor</span><span class="mtk1">.</span><span class="mtk11">constraint</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                </span><span class="mtk11">equalTo</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">bottomAnchor</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            ).</span><span class="mtk12">isActive</span><span class="mtk1"> = </span><span class="mtk4">true</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>It&#x27;s classic autolayout: add the view to the cell&#x27;s <code>contentView</code>, set up constraints, and everything should work from there. The first page of cells gets the right size, but unfortunately there are some issues when the cells get reused:</p><div class="FlowGrid__Container-sc-1akniko-0 loyjLq"><div class="FlowGrid__Row-sc-1akniko-1 joJmgG"><div class="FlowGrid__Item-sc-1akniko-2 dVdQRb"><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="300" class="CaptionedImage__Container-owr0zk-1 bSsiAj"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:184.9236641221374%"></div><img src="data:image/png;base64,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" alt="Layout working correctly when the app first loads" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/4e049d0cc5704fe554adc6008806d297/59d48/swiftuicell-7.png 150w,
/static/4e049d0cc5704fe554adc6008806d297/c6a2b/swiftuicell-7.png 300w,
/static/4e049d0cc5704fe554adc6008806d297/78d2a/swiftuicell-7.png 600w,
/static/4e049d0cc5704fe554adc6008806d297/273c9/swiftuicell-7.png 900w,
/static/4e049d0cc5704fe554adc6008806d297/ae639/swiftuicell-7.png 1048w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/4e049d0cc5704fe554adc6008806d297/59d48/swiftuicell-7.png 150w,
/static/4e049d0cc5704fe554adc6008806d297/c6a2b/swiftuicell-7.png 300w,
/static/4e049d0cc5704fe554adc6008806d297/78d2a/swiftuicell-7.png 600w,
/static/4e049d0cc5704fe554adc6008806d297/273c9/swiftuicell-7.png 900w,
/static/4e049d0cc5704fe554adc6008806d297/ae639/swiftuicell-7.png 1048w" src="/static/4e049d0cc5704fe554adc6008806d297/78d2a/swiftuicell-7.png" alt="Layout working correctly when the app first loads" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX">First load</div></div></div></div><div class="FlowGrid__Item-sc-1akniko-2 dVdQRb"><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="300" class="CaptionedImage__Container-owr0zk-1 bSsiAj"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:184.9236641221374%"></div><img src="data:image/png;base64,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" alt="Table view with incorrect cell heights after scrolling" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/acab9e81805c7062eff5a238b9df0d46/59d48/swiftuicell-8.png 150w,
/static/acab9e81805c7062eff5a238b9df0d46/c6a2b/swiftuicell-8.png 300w,
/static/acab9e81805c7062eff5a238b9df0d46/78d2a/swiftuicell-8.png 600w,
/static/acab9e81805c7062eff5a238b9df0d46/273c9/swiftuicell-8.png 900w,
/static/acab9e81805c7062eff5a238b9df0d46/ae639/swiftuicell-8.png 1048w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/acab9e81805c7062eff5a238b9df0d46/59d48/swiftuicell-8.png 150w,
/static/acab9e81805c7062eff5a238b9df0d46/c6a2b/swiftuicell-8.png 300w,
/static/acab9e81805c7062eff5a238b9df0d46/78d2a/swiftuicell-8.png 600w,
/static/acab9e81805c7062eff5a238b9df0d46/273c9/swiftuicell-8.png 900w,
/static/acab9e81805c7062eff5a238b9df0d46/ae639/swiftuicell-8.png 1048w" src="/static/acab9e81805c7062eff5a238b9df0d46/78d2a/swiftuicell-8.png" alt="Table view with incorrect cell heights after scrolling" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX">After scrolling</div></div></div></div></div></div><p>If you look closely, you can actually see that each cell is reusing the height of a previous cell - the heights aren&#x27;t updated on reuse. I played around with this for a while but wasn&#x27;t able to figure out what was going on - then it hit me that in autolayout, the size of a view without other height/width constraints comes from its <code>intrinsicContentSize</code>. Turns out that setting the <code>rootView</code> on a <code>UIHostingController</code> doesn&#x27;t immediately invalidate its <code>intrinsicContentSize</code>, so we have to make the following, magical edit which basically makes everything work:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">set</span><span class="mtk1">(</span><span class="mtk11">rootView</span><span class="mtk1">: Content) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">hostingController</span><span class="mtk1">.</span><span class="mtk12">rootView</span><span class="mtk1"> = rootView</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">hostingController</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk11">invalidateIntrinsicContentSize</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk3">// ...</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>Now we&#x27;ve got what we want, and safe area works correctly!</p><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="500" class="CaptionedImage__Container-owr0zk-1 ylgnz"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:61.93058568329718%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACjElEQVQoz4WS/UtTYRTHrwX+MtnSnI5ymi6zzCAyYRlWtjtfhmtvDYK0SAkSghBCtwgq2mLpKLFy0i+BUP9DoOK2fsqaW6ssEiKlDTYcd1O2vPe59/Q8d3cgInXgwzn3Oed+z/e+UBRFFfXQOq31krGr02Kh9caL+vMGq76tw6g/03FhJ+iznSbdabpHZ7T30jdu3tL1Xx/s6jHZtEQLU158svHQi/oG9dLhuqbwkXpNpEFzIFJXvT+iqamKaKq3UVP17WCN+ketet/348eOLrWeaos2t2i/tmhbJ7FYMUWC1nW4H4971wfHbyf67/qSvY6XySvOnelzTKX7Rnwbl0d869fu+JjJ6em1iYlnmfb2c48oKWRjHm8EgIMHn59C4xSA3ANQPgawV6JsNE+hJr0SPNP0HACmXwEJ16g3SrSIoOKh90kIVn8Cc7UPVd3PCtSwIOxyIKFoJA+pt19Tw7ygupcV0JvX6MvsW2g60bxItIig3OV2h8gWnkmhaIyDhRUWPmAWVjbhI87zyyz4lwtn+fz+1yaEVv+Q29DM7Awo5IqwYo9CLjp0u92LpJNKMSjLrAGwOTJHVvwbnhUFA/MBqKisDBNzeYcul+gwHo+j37G4kF7fgE0OAYd4EcQLIpyUC7AcEojg3NwcyGSysEqlyjv0eDyiQ4Zh2HQ6jViWRTzPi0hWt8NvqdlMJgN2uz1ceIeyoaGhUP6RUyLZbBY4joNcLkdcQywWg0QiAclkEvAyEAQB8DIxkzkSTqeTfJQS8b9RKpUDBoMhaLFY/Gaz2W+1WgM2my2A6wBN01vxm0ymd3juE+5F8FwQO/N3d3cHS0tLB6gtsRtThqn4D0qMClMrUSmdl0ka1F/eMRrvNJmx/gAAAABJRU5ErkJggg==" alt="Complicated SwiftUI layout working but not overlapping the notch" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/09e0b6dd226077cb4510f98d16aac152/59d48/swiftuicell-10.png 150w,
/static/09e0b6dd226077cb4510f98d16aac152/c6a2b/swiftuicell-10.png 300w,
/static/09e0b6dd226077cb4510f98d16aac152/78d2a/swiftuicell-10.png 600w,
/static/09e0b6dd226077cb4510f98d16aac152/273c9/swiftuicell-10.png 900w,
/static/09e0b6dd226077cb4510f98d16aac152/9911c/swiftuicell-10.png 1200w,
/static/09e0b6dd226077cb4510f98d16aac152/8339e/swiftuicell-10.png 1844w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/09e0b6dd226077cb4510f98d16aac152/59d48/swiftuicell-10.png 150w,
/static/09e0b6dd226077cb4510f98d16aac152/c6a2b/swiftuicell-10.png 300w,
/static/09e0b6dd226077cb4510f98d16aac152/78d2a/swiftuicell-10.png 600w,
/static/09e0b6dd226077cb4510f98d16aac152/273c9/swiftuicell-10.png 900w,
/static/09e0b6dd226077cb4510f98d16aac152/9911c/swiftuicell-10.png 1200w,
/static/09e0b6dd226077cb4510f98d16aac152/8339e/swiftuicell-10.png 1844w" src="/static/09e0b6dd226077cb4510f98d16aac152/78d2a/swiftuicell-10.png" alt="Complicated SwiftUI layout working but not overlapping the notch" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX"></div></div></div><p>(It&#x27;s worth noting, also, that we don&#x27;t even need the <code>fixedSize</code> modifier anymore - autolayout seems to use the fixed size of the view as expected.)</p><h2 id="view-controller-containment" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">View Controller Containment</h2><p>When implementing this for <a href="https://apps.apple.com/us/app/cifilter-io/id1457458557">CIFilter.io</a>, I ran into one last issue: when scrolling through the list, occasionally, I&#x27;d run across a cell with an incorrect height. Usually it would just be one cell, and the height would be <em>almost</em> correct, and it always corrected itself when scrolling the cell off the screen then scrolling it back on again.</p><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="400" class="CaptionedImage__Container-owr0zk-1 iKttdc"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:184.9236641221374%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAG/UlEQVRIx62We1BUVRzH7y6wuD5hF1B8LOaYOuFg6mRKCCRKvgBlzNEsHzxE0UyFUdMm05FybBqnHJvG1WlxNCv/yGZq4o/MEFBTExMRF3zwEIj38lj2ce49v36/c3dh1Rz7o535zrl377mf+3ud3zmSFBkt/R8/APC5G6QfODc6dt+i+bH5sxfEHoub84Y59vW55tmomPgEc0xcgnlmTJx52oxZ5pVvrzWnZW40L1/5jjn1zZXHVq1Oy4+bk5iHlMB+qM5vZOK0V8uXLZrhnj73ZeeMWbPZa7Gvs5i4OSx6djybFRPHpr0yk0VGTWXLVqxiq9dlsJTU5WzB4hTn2vT19LwKKWEHD31KNK0mUKM14EWs5Kc/8+K4CZWTJk20BgUFWYcOHVqJo5AhOLjSaDRUDh48uHLQoEHW8ePHWydOnFip1Wq/xXfj/P39iaGRpk+dqpXElbRx584dUFFRAdXV1bB9+3YYPXo04EuALwtNmDABRo0aBenp6WCz2aC0tBT27NkDfn5+m4gR+VKkVlqxYoUAhoSEHL9y5Qp0d3e76urqlNraWuXGjRtKfX290tjYqDQ0NIiR7t1ut4LxIrnKy8sBPThOriYmJmok/BoB/cLCwo4XFRWB0+lkTU1NvLm5mXd2doLL5QIECDmdLnHf29vLbbZOjkD59u3bMGzYMAsy9MnJyRopLy9PQ3keMWLED8XFxcA5ZzS5q6sL3eqEtrY2oOuenh6UHT3oAbtdjARkHmB+HxAh5LEhPDz8vAcoo2UCiO7Dc36srKysz8KkpCSNlJ2dTS4PRpe/I2BHRwfDpHBKDMYS3XMIN8ldDAc4HA4xkrU+Ln+DjIFLlizReCs8ZOTIkRjCYjGpq6vb42KPcLujw0YfEqK40v80eoGY0N+QEbRmzRpJOnLkCMUwDF0uJAtVYBf3Al0ub0KcQoqiCF89o0wuI7CQjBJZ3rt3LwFDMCnnyUKsLxlLhtfU1ACWCMiyTHHtE4FI9BEfYBEyQhMSEjTS9evXyeUR6PIVtWxccnNzC7S0tIoMt7W1e9QGra2q2ts7gOZ4XQ4ODv6JEjtv3jyNlJOTQxYahw8f/ktJSYmYhK5xt5t5kkGJcFLtiYR4ReHwlg0u0ZOU2IULF/YVtj40NPQkAdEdhsHntLSodJ71I/d9yoaAA0XZZGZmEjAAyyafkoIghvETMXz06JEoYm9CqIRIatn0W/hYYa9fv94LtHiyzCjLtCK6uvvLhuLmLR+ynmL6r8CsrKw+ILmMnqDLNrFSKIYyY5hpBgyzSiXkcquiuApg+RPAzHTVwpCQUEtxoUgK6+2xc3sPNgG7u08OFHfL+FSV4hJlw/66fqsPmLQYgRnrVOCYUJPldMFpeKtyM9tdepLHHgWYcrgXpn/ugMmfOWD+CSdUP6yC+1V34O6dW1BlLYfG+vvsGnoVFGT0AaapQFNohOVkwSlIvr+ZZf95huvexzWZy0HageM2gLA8gKp7D8FqtUJZ2W1sxFaoqXnArl4qgeDHgB4LQ0aNtRSfygfYtJLdOWzm+gMAfrsUCPwAoTs5vHAI4N79B2C9WwG3bpZCBTbWmhq08NIzLDSOGWcpOXEMIGEaq9z1MdehRZqdMgTsVq0c8wmH2rp66LZjY8AS7HRiTBUXu3H1D4yh4WkLjcbhlpLzv2KYu5n1gY3rPwTwR9gAsnAXwNiDuH4pDR1YLl99AXDxgicp13ClBPcDM70WGrBsLhaKSRUtwEX8tqFyUO9xMH4kg0xPy2+BYtSBnPuuCiQLfYEZPsBLhepXG20y3/wjh43nOGSfA1j9PUDOz1ig9BRXCEfrZEyO18LHgev6gZcv/i4mAe/FKLnwkorXDjZcfl0OO7Ysu/hP7E7CXuVpYGaGCsTmYCm6UALMIbPWpnbe8nc7tDbbwOVQgDlVKS4FWxGqF5uu3SU+ftOnsJOTnlh6tJZxybG6ukccBQ0NjWIvoVamSu3eDJcjNYjnreWvqcFih2bYULnaCGzQKhprKzZctemqjbcdmpqaOW25TwE3bNgggNhg8y9fviz2ZU9zoI7DsX1x2thpxJ1ObPC4veJ9r9iX6eiCJwfqh/qUlBSNlJqaSkD/AQMGHD179qxwA7sMR7cEBFuVgJOo8VJv9RErKCgAnS7wS41Go4uPj9dIUVFRksFgCERoUmRkZHVW1gbYunUrbNmyBdB6cTDKyMgQSktLg9zcXNi/fz/s27dPHJSmRE2pxXdT8FQWGB3df3j1wy+E47gUdQB16D+K5i71vOsvSCaTSQoICKDLADz3Ben1+nCdTmci4ZnPhOc/Ex7XhOgaQ2MaMmSICS0yYezC8TqY3iXA5MmT8Qym1faZiedBKSIiQotnwOcK52ppLr3j/aGl0j/ptKEAWYnoKwAAAABJRU5ErkJggg==" alt="Our same table view, but with the middle cell just slightly taller than it should be" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/95bd1fe9737b9a3617f3bbdf7e56a602/59d48/swiftuicell-9.png 150w,
/static/95bd1fe9737b9a3617f3bbdf7e56a602/c6a2b/swiftuicell-9.png 300w,
/static/95bd1fe9737b9a3617f3bbdf7e56a602/78d2a/swiftuicell-9.png 600w,
/static/95bd1fe9737b9a3617f3bbdf7e56a602/273c9/swiftuicell-9.png 900w,
/static/95bd1fe9737b9a3617f3bbdf7e56a602/ae639/swiftuicell-9.png 1048w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/95bd1fe9737b9a3617f3bbdf7e56a602/59d48/swiftuicell-9.png 150w,
/static/95bd1fe9737b9a3617f3bbdf7e56a602/c6a2b/swiftuicell-9.png 300w,
/static/95bd1fe9737b9a3617f3bbdf7e56a602/78d2a/swiftuicell-9.png 600w,
/static/95bd1fe9737b9a3617f3bbdf7e56a602/273c9/swiftuicell-9.png 900w,
/static/95bd1fe9737b9a3617f3bbdf7e56a602/ae639/swiftuicell-9.png 1048w" src="/static/95bd1fe9737b9a3617f3bbdf7e56a602/78d2a/swiftuicell-9.png" alt="Our same table view, but with the middle cell just slightly taller than it should be" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX">Notice the 4th cell from the top - it&#x27;s just slightly taller than it should be, as evidenced by the extra whitespace</div></div></div><p>This was a real head scratcher, but I asked about it on Twitter and <a href="https://steipete.me/">Peter Steinberger</a> noticed something interesting:</p><div class="Tweet__Wrapper-sc-13ea3j0-0 emBdTA"><div class="Tweet__InnerWrapper-sc-13ea3j0-1 fgyWQq"><div></div></div></div><p>The code we wrote before, even though it embeds the <code>UIHostingController</code>&#x27;s view in the hierarchy, doesn&#x27;t properly add the controller as a child controller as <a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621394-addchild">recommended by the docs</a>. In order to account for this, we need to make our <code>set(rootView:)</code> method take a parent controller as well, and do a little bit of extra work to add the child:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">set</span><span class="mtk1">(</span><span class="mtk11">rootView</span><span class="mtk1">: Content, </span><span class="mtk11">parentController</span><span class="mtk1">: UIViewController) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">hostingController</span><span class="mtk1">.</span><span class="mtk12">rootView</span><span class="mtk1"> = rootView</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">hostingController</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk11">invalidateIntrinsicContentSize</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">let</span><span class="mtk1"> requiresControllerMove = hostingController.</span><span class="mtk12">parent</span><span class="mtk1"> != parentController</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk15">if</span><span class="mtk1"> requiresControllerMove {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        parentController.</span><span class="mtk11">addChild</span><span class="mtk1">(hostingController)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk3">// addSubview, set up constraints, etc...</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk15">if</span><span class="mtk1"> requiresControllerMove {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        hostingController.</span><span class="mtk11">didMove</span><span class="mtk1">(</span><span class="mtk11">toParent</span><span class="mtk1">: parentController)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>And magically, this works! When using proper view controller containment, I haven&#x27;t been able to detect any incorrect sizes at all - the cell layouts just work, there are no detectable scroll performance issues. For whatever reason, adding proper view controller containment solves the issue.</p><h2 id="caveats" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">Caveats</h2><p>This approach has worked really well for my use case, but you can&#x27;t do everything SwiftUI can do inside these cell views and expect them to work. Specifically:</p><ol><li>Triggering something in your view which changes its height won&#x27;t update the cell&#x27;s height. Regular table view rules apply: if you want to change the size of the cell, you have to hook into <a href="https://stackoverflow.com/questions/460014/can-you-animate-a-height-change-on-a-uitableviewcell-when-selected#:~:text=Store%20the%20cell%20height%20in,beginUpdates%5D%3B%20%5BtableView%20endUpdates%5D%3B">hook into the table view to notify that it should update</a>.</li><li>Updating <code>@State</code> variables produces inconsistent behavior - <code>@State</code> updates are persisted between cell reuse sometimes, even if your view initializer resets the <code>@State</code> variable. There might be a way to get this to work, but I haven&#x27;t been able to figure it out yet - if you want to update your cells, it&#x27;s best to call <a href="https://developer.apple.com/documentation/uikit/uitableview/1614935-reloadrows">reloadRows</a>.</li></ol><h2 id="conclusion" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">Conclusion</h2><p>At the end of the day, whether you want to take this approach to start adopting SwiftUI will be up to what you and your team are comfortable with. Hopefully this post has provided some insight into what it would take to start using SwiftUI in your table view cells so that you can make a more informed decision.</p><p>If you have any thoughts, feel free to reach out <a href="https://twitter.com/noahsark769">on Twitter</a> 👋</p><h2 id="code" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">Code</h2><blockquote><p>The full source code for the code samples in this article is available <a href="https://github.com/noahsark769/NGSwiftUITableCellSizing">here</a>.</p></blockquote><p>Here&#x27;s the full <code>HostingCell</code> code for reference:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk4">class</span><span class="mtk1"> </span><span class="mtk10">HostingCell</span><span class="mtk1">&lt;</span><span class="mtk4">Content</span><span class="mtk1">: </span><span class="mtk10">View</span><span class="mtk1">&gt;: UITableViewCell {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">let</span><span class="mtk1"> hostingController = UIHostingController&lt;Content?&gt;(</span><span class="mtk11">rootView</span><span class="mtk1">: </span><span class="mtk4">nil</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">style</span><span class="mtk1">: UITableViewCell.CellStyle, </span><span class="mtk11">reuseIdentifier</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">?) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">super</span><span class="mtk1">.</span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">style</span><span class="mtk1">: style, </span><span class="mtk11">reuseIdentifier</span><span class="mtk1">: reuseIdentifier)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">backgroundColor</span><span class="mtk1"> = .</span><span class="mtk12">clear</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">required</span><span class="mtk1"> </span><span class="mtk4">init?</span><span class="mtk1">(</span><span class="mtk11">coder</span><span class="mtk1"> </span><span class="mtk12">aDecoder</span><span class="mtk1">: NSCoder) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk11">fatalError</span><span class="mtk1">(</span><span class="mtk8">&quot;init(coder:) has not been implemented&quot;</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">set</span><span class="mtk1">(</span><span class="mtk11">rootView</span><span class="mtk1">: Content, </span><span class="mtk11">parentController</span><span class="mtk1">: UIViewController) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">hostingController</span><span class="mtk1">.</span><span class="mtk12">rootView</span><span class="mtk1"> = rootView</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">hostingController</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk11">invalidateIntrinsicContentSize</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">let</span><span class="mtk1"> requiresControllerMove = hostingController.</span><span class="mtk12">parent</span><span class="mtk1"> != parentController</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">if</span><span class="mtk1"> requiresControllerMove {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            parentController.</span><span class="mtk11">addChild</span><span class="mtk1">(hostingController)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">if</span><span class="mtk1"> !</span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">subviews</span><span class="mtk1">.</span><span class="mtk11">contains</span><span class="mtk1">(hostingController.</span><span class="mtk12">view</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk11">addSubview</span><span class="mtk1">(hostingController.</span><span class="mtk12">view</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">translatesAutoresizingMaskIntoConstraints</span><span class="mtk1"> = </span><span class="mtk4">false</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">leadingAnchor</span><span class="mtk1">.</span><span class="mtk11">constraint</span><span class="mtk1">(</span><span class="mtk11">equalTo</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">leadingAnchor</span><span class="mtk1">).</span><span class="mtk12">isActive</span><span class="mtk1"> = </span><span class="mtk4">true</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">trailingAnchor</span><span class="mtk1">.</span><span class="mtk11">constraint</span><span class="mtk1">(</span><span class="mtk11">equalTo</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">trailingAnchor</span><span class="mtk1">).</span><span class="mtk12">isActive</span><span class="mtk1"> = </span><span class="mtk4">true</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">topAnchor</span><span class="mtk1">.</span><span class="mtk11">constraint</span><span class="mtk1">(</span><span class="mtk11">equalTo</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">topAnchor</span><span class="mtk1">).</span><span class="mtk12">isActive</span><span class="mtk1"> = </span><span class="mtk4">true</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">bottomAnchor</span><span class="mtk1">.</span><span class="mtk11">constraint</span><span class="mtk1">(</span><span class="mtk11">equalTo</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">contentView</span><span class="mtk1">.</span><span class="mtk12">bottomAnchor</span><span class="mtk1">).</span><span class="mtk12">isActive</span><span class="mtk1"> = </span><span class="mtk4">true</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">if</span><span class="mtk1"> requiresControllerMove {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            hostingController.</span><span class="mtk11">didMove</span><span class="mtk1">(</span><span class="mtk11">toParent</span><span class="mtk1">: parentController)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><style class="vscode-highlight-styles">
  
  .dark-default-dark {
background-color: #1E1E1E;
color: #D4D4D4;
}

.dark-default-dark .mtk1 { color: #D4D4D4; }
.dark-default-dark .mtk2 { color: #1E1E1E; }
.dark-default-dark .mtk3 { color: #6A9955; }
.dark-default-dark .mtk4 { color: #569CD6; }
.dark-default-dark .mtk5 { color: #D16969; }
.dark-default-dark .mtk6 { color: #D7BA7D; }
.dark-default-dark .mtk7 { color: #B5CEA8; }
.dark-default-dark .mtk8 { color: #CE9178; }
.dark-default-dark .mtk9 { color: #646695; }
.dark-default-dark .mtk10 { color: #4EC9B0; }
.dark-default-dark .mtk11 { color: #DCDCAA; }
.dark-default-dark .mtk12 { color: #9CDCFE; }
.dark-default-dark .mtk13 { color: #000080; }
.dark-default-dark .mtk14 { color: #F44747; }
.dark-default-dark .mtk15 { color: #C586C0; }
.dark-default-dark .mtk16 { color: #6796E6; }
.dark-default-dark .mtk17 { color: #808080; }
.dark-default-dark .mtki { font-style: italic; }
.dark-default-dark .mtkb { font-weight: bold; }
.dark-default-dark .mtku { text-decoration: underline; text-underline-position: under; }
</style></div><div class="BlogPageLayout__NonContent-sc-1pnb15k-1 bDzSYv"><div class="EndButtons__Container-sc-1rt8k5q-0 jmGPXo"><a href="https://twitter.com/intent/tweet?text=Post%20by%20%40noahsark769%3A%20Self-Sizing%20UITableView%20Cells%20with%20SwiftUI%20https%3A%2F%2Fnoahgilmore.com%2Fblog%2Fswiftui-self-sizing-cells%2F" target="_blank" class="default__HighlightedA-phsh4y-6 gkfXpi pr-8">Tweet This</a><a href="https://noahgilmore.substack.com/" target="_blank" class="default__HighlightedA-phsh4y-6 gkfXpi">Get New Posts Via Email</a></div><div style="font-family:&#x27;Merriweather&#x27;, times, serif" class="dark-mode:text-white flex flex-col leading-6 mt-32 pt-16 border-t border-solid border-white"><div class="flex flex-row items-center mb-12 md:mb-0"><div class="w-32 md:w-48 max-w-none rounded-full overflow-hidden mr-8"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:100%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQCAQP/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGqHuxgbBQF8Qn/xAAeEAABAwQDAAAAAAAAAAAAAAACAAEDBBESEyExMv/aAAgBAQABBQKQXR8BssoDnkR4p8b0XkBY6huv/8QAFREBAQAAAAAAAAAAAAAAAAAAASD/2gAIAQMBAT8BCP/EABYRAQEBAAAAAAAAAAAAAAAAABABQf/aAAgBAgEBPwGmn//EAB0QAAIBBAMAAAAAAAAAAAAAAAABMQIDESEQUXH/2gAIAQEABj8C6NzxWm9YFQ9sgueGHBCP/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFBYXGB/9oACAEBAAE/IUND6qPHO2JMoYBbNRDz3OII2/mkpnotfI6JZ6T/2gAMAwEAAgADAAAAEBM4gP/EABcRAQADAAAAAAAAAAAAAAAAABABEUH/2gAIAQMBAT8Qsgw//8QAGhEAAgIDAAAAAAAAAAAAAAAAAAEQESFBcf/aAAgBAgEBPxBqaMG3I//EAB4QAQEAAgICAwAAAAAAAAAAAAERACFBUTFhcZGx/9oACAEBAAE/EHFVvJ+4mjaBRl9zDViecIpgCUrx3ocTbhJsBbvvr4x10eIY5LdFeNuLr04Kb2v3gJREorn/2Q==" alt="Picture of me with a corgi" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/a5f1e0ee8af819520ac472cb18032c72/421ae/corgi.jpg 150w,
/static/a5f1e0ee8af819520ac472cb18032c72/58d6d/corgi.jpg 300w,
/static/a5f1e0ee8af819520ac472cb18032c72/f5db2/corgi.jpg 600w,
/static/a5f1e0ee8af819520ac472cb18032c72/4d2f6/corgi.jpg 900w,
/static/a5f1e0ee8af819520ac472cb18032c72/04d73/corgi.jpg 1067w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/a5f1e0ee8af819520ac472cb18032c72/421ae/corgi.jpg 150w,
/static/a5f1e0ee8af819520ac472cb18032c72/58d6d/corgi.jpg 300w,
/static/a5f1e0ee8af819520ac472cb18032c72/f5db2/corgi.jpg 600w,
/static/a5f1e0ee8af819520ac472cb18032c72/4d2f6/corgi.jpg 900w,
/static/a5f1e0ee8af819520ac472cb18032c72/04d73/corgi.jpg 1067w" src="/static/a5f1e0ee8af819520ac472cb18032c72/f5db2/corgi.jpg" alt="Picture of me with a corgi" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="flex flex-col"><h1 class="uppercase text-3xl font-bold mb-4 leading-8" style="font-family:&#x27;Roboto&#x27;, sans-serif">Noah Gilmore</h1><p class="hidden md:block">I&#x27;m Noah, a software developer based in the San Francisco Bay Area. I focus mainly on iOS, Apple platform development, and full stack web development.</p></div></div><p class="block md:hidden mb-12">Hello! I&#x27;m Noah, a software developer based in the San Francisco bay area. I focus mainly on iOS, Apple platform development, and full stack web development.</p><div><ul class="p-0 md:pt-8 md:pb-8"><li class="pb-6"><span role="img" aria-label="Computer">💻</span> I&#x27;m writing a macOS editor for Atlassian Confluence called <a class="default__HighlightedA-phsh4y-6 gkfXpi underline" href="https://getfluency.io">Fluency</a></li><li class="pb-6"><span role="img" aria-label="Phone">📱</span> I wrote an app which lets you create transparent app icons called <a class="default__HighlightedA-phsh4y-6 gkfXpi underline" href="https://transparenticons.app">Transparent App Icons</a></li><li class="pb-6"><span role="img" aria-label="Puzzle">🧩</span> I made a puzzle game for iPhone and iPad called <a class="default__HighlightedA-phsh4y-6 gkfXpi underline" href="https://apps.apple.com/us/app/trestle-the-new-sudoku/id1300230302">Trestle</a></li><li class="pb-6"><span role="img" aria-label="Art">🎨</span> I wrote a CoreImage filter utility app for iOS developers called <a class="default__HighlightedA-phsh4y-6 gkfXpi underline" href="https://apps.apple.com/us/app/cifilter-io/id1457458557">CIFilter.io</a></li><li><span role="img" aria-label="Wave">👋</span> Please feel free to reach out on <a class="default__HighlightedA-phsh4y-6 gkfXpi underline" href="https://twitter.com/noahsark769">Twitter</a></li></ul></div></div><div class="Disqus__Wrapper-sc-15q2k8t-0 dXIkuv"><div id="disqus_thread"></div></div></div></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/swiftui-self-sizing-cells/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-41bf133523e562b7251f.js"],"component---src-templates-mdx-blog-posts-template-jsx":["/component---src-templates-mdx-blog-posts-template-jsx-e7eecaf3819407a43e71.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-4a15296be80b713f3a9d.js"],"component---src-pages-blog-index-jsx":["/component---src-pages-blog-index-jsx-1993272147cdabff5096.js"],"component---src-pages-examples-ios-copy-to-clipboard-index-jsx":["/component---src-pages-examples-ios-copy-to-clipboard-index-jsx-dffdc1859cfeb5df06dd.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-fb6a0d875aa7f0bd0051.js"],"component---src-pages-blog-advertising-mdx":["/component---src-pages-blog-advertising-mdx-6041348659d9ad4498a7.js"],"component---src-pages-blog-amplitude-macos-mdx":["/component---src-pages-blog-amplitude-macos-mdx-6bb9459a62344934ce8a.js"],"component---src-pages-blog-automatic-preview-updating-paused-mdx":["/component---src-pages-blog-automatic-preview-updating-paused-mdx-d1615e4f90af4eb46d49.js"],"component---src-pages-blog-catalina-importerror-no-module-named-zlib-mdx":["/component---src-pages-blog-catalina-importerror-no-module-named-zlib-mdx-a532dcf39d7fef818c33.js"],"component---src-pages-blog-cfbundleversion-invalid-mdx":["/component---src-pages-blog-cfbundleversion-invalid-mdx-c3571ac20ee0da7d4032.js"],"component---src-pages-blog-cifilter-colorwheel-mdx":["/component---src-pages-blog-cifilter-colorwheel-mdx-1264d2ff668442a56743.js"],"component---src-pages-blog-cifilterio-mdx":["/component---src-pages-blog-cifilterio-mdx-09ef1f8ab365e2c0ffed.js"],"component---src-pages-blog-civector-codable-mdx":["/component---src-pages-blog-civector-codable-mdx-a604974277ebf64c5a4c.js"],"component---src-pages-blog-color-compatibility-pod-mdx":["/component---src-pages-blog-color-compatibility-pod-mdx-04b6318ab9152fe8b50c.js"],"component---src-pages-blog-coreanimation-metal-mdx":["/component---src-pages-blog-coreanimation-metal-mdx-71ec5a53613965d04cb7.js"],"component---src-pages-blog-dark-mode-uicolor-compatibility-mdx":["/component---src-pages-blog-dark-mode-uicolor-compatibility-mdx-b42baaee5524ab362631.js"],"component---src-pages-blog-data-over-the-app-store-mdx":["/component---src-pages-blog-data-over-the-app-store-mdx-c0ca5251de352655e4d1.js"],"component---src-pages-blog-didprocessediting-crash-mdx":["/component---src-pages-blog-didprocessediting-crash-mdx-56d5ea29af9b22dfb185.js"],"component---src-pages-blog-docker-commands-mdx":["/component---src-pages-blog-docker-commands-mdx-7a10f712c96ce51a9390.js"],"component---src-pages-blog-easy-gatsby-image-components-mdx":["/component---src-pages-blog-easy-gatsby-image-components-mdx-6bb08b248064874ab7bb.js"],"component---src-pages-blog-gatsby-mdx-frontmatter-mdx":["/component---src-pages-blog-gatsby-mdx-frontmatter-mdx-e7f2795b9aec8d5427aa.js"],"component---src-pages-blog-gatsby-tailwind-mdx":["/component---src-pages-blog-gatsby-tailwind-mdx-4139cd11d9cade837913.js"],"component---src-pages-blog-gpu-capture-flickering-mdx":["/component---src-pages-blog-gpu-capture-flickering-mdx-2fc5a60d32baf22b1ec7.js"],"component---src-pages-blog-install-nokogiri-macos-mojave-mdx":["/component---src-pages-blog-install-nokogiri-macos-mojave-mdx-ac0be3cc0cfaaa31c1cb.js"],"component---src-pages-blog-installing-sharp-github-actions-mdx":["/component---src-pages-blog-installing-sharp-github-actions-mdx-cf5b2e1f9534a3cf52d9.js"],"component---src-pages-blog-my-bucket-list-mdx":["/component---src-pages-blog-my-bucket-list-mdx-03fa7b709932b453003a.js"],"component---src-pages-blog-nesting-property-wrappers-mdx":["/component---src-pages-blog-nesting-property-wrappers-mdx-889dadc41c73688faeac.js"],"component---src-pages-blog-nsobject-equatable-mdx":["/component---src-pages-blog-nsobject-equatable-mdx-4de465e83130b4311a35.js"],"component---src-pages-blog-nstextview-shift-tab-mdx":["/component---src-pages-blog-nstextview-shift-tab-mdx-b2e6f02fcd2a6e4ea1df.js"],"component---src-pages-blog-popover-uinavigationcontroller-preferredcontentsize-mdx":["/component---src-pages-blog-popover-uinavigationcontroller-preferredcontentsize-mdx-db8fdcc313df4336f6a6.js"],"component---src-pages-blog-pyparsing-trees-mdx":["/component---src-pages-blog-pyparsing-trees-mdx-9c3ddd5a1014988f9d49.js"],"component---src-pages-blog-refactoring-private-to-public-mdx":["/component---src-pages-blog-refactoring-private-to-public-mdx-b8df43e3cf2faa93db94.js"],"component---src-pages-blog-rxswift-multiple-subscribers-mdx":["/component---src-pages-blog-rxswift-multiple-subscribers-mdx-5f4ca07e36fa39d6444e.js"],"component---src-pages-blog-sf-symbols-ios-14-mdx":["/component---src-pages-blog-sf-symbols-ios-14-mdx-aa715423efa959eaab5d.js"],"component---src-pages-blog-swift-dependency-injection-mdx":["/component---src-pages-blog-swift-dependency-injection-mdx-d57a10df174cca0c284e.js"],"component---src-pages-blog-swift-pointer-uint-mdx":["/component---src-pages-blog-swift-pointer-uint-mdx-296fdf36620a6897d1f2.js"],"component---src-pages-blog-swiftui-equatable-crash-mdx":["/component---src-pages-blog-swiftui-equatable-crash-mdx-98da1bbe1e2c720583a3.js"],"component---src-pages-blog-swiftui-relativedatetimeformatter-mdx":["/component---src-pages-blog-swiftui-relativedatetimeformatter-mdx-194b1c3fbb0fdd716dfd.js"],"component---src-pages-blog-swiftui-self-sizing-cells-mdx":["/component---src-pages-blog-swiftui-self-sizing-cells-mdx-2ce5a6cdd7aefab53ed0.js"],"component---src-pages-blog-swiftui-two-columns-equal-width-mdx":["/component---src-pages-blog-swiftui-two-columns-equal-width-mdx-6d685eebf7803ec1d8b0.js"],"component---src-pages-blog-tables-are-hard-mdx":["/component---src-pages-blog-tables-are-hard-mdx-1ed388614cc895a99385.js"],"component---src-pages-blog-taking-down-sfsymbols-mdx":["/component---src-pages-blog-taking-down-sfsymbols-mdx-2a3ca080ffbc4aca2886.js"],"component---src-pages-blog-transparent-app-icons-mdx":["/component---src-pages-blog-transparent-app-icons-mdx-938e95c86cd4cd9cac0e.js"],"component---src-pages-blog-tuple-shuffling-mdx":["/component---src-pages-blog-tuple-shuffling-mdx-c16453980be0999333d9.js"],"component---src-pages-blog-uibutton-padding-mdx":["/component---src-pages-blog-uibutton-padding-mdx-ef5ecd02a056dba03341.js"],"component---src-pages-blog-uipasteboard-webp-mdx":["/component---src-pages-blog-uipasteboard-webp-mdx-7169b363512f1290154d.js"],"component---src-pages-blog-uiwindowscene-black-screen-mdx":["/component---src-pages-blog-uiwindowscene-black-screen-mdx-88251d021331b7e5b9a0.js"],"component---src-pages-blog-userdefaults-editor-swiftui-mdx":["/component---src-pages-blog-userdefaults-editor-swiftui-mdx-adca2a971db5f08a7908.js"],"component---src-pages-blog-userdefaults-set-nil-mdx":["/component---src-pages-blog-userdefaults-set-nil-mdx-1024f16a9a2eb83acf13.js"],"component---src-pages-blog-xcode-shared-test-target-mdx":["/component---src-pages-blog-xcode-shared-test-target-mdx-8379ff29794f156fc128.js"]};/*]]>*/</script><script src="/component---src-pages-blog-swiftui-self-sizing-cells-mdx-2ce5a6cdd7aefab53ed0.js" async=""></script><script src="/commons-3e6dfaab6d1d44869a85.js" async=""></script><script src="/app-41bf133523e562b7251f.js" async=""></script><script src="/styles-c1c07cf25e5f354e4d8e.js" async=""></script><script src="/webpack-runtime-ca5d89e5047a55ed27c3.js" async=""></script></body></html>