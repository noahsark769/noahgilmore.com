{"version":3,"sources":["webpack:///./src/components/DataLink.jsx","webpack:///./src/pages/blog/data-over-the-app-store.mdx","webpack:///./src/components/default.jsx","webpack:///./node_modules/gatsby-link/index.js","webpack:///./src/components/colors.js","webpack:///./node_modules/@mdx-js/tag/dist/mdx-provider.js","webpack:///./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///./src/fonts/Bariol-Regular.eot","webpack:///./src/fonts/Bariol-Regular.woff","webpack:///./src/fonts/Bariol-Regular.ttf","webpack:///./src/fonts/Bariol-Regular.svg","webpack:///./src/components/Nav.jsx","webpack:///./src/components/BlogPost.jsx","webpack:///./src/components/MarkdownContent.jsx","webpack:///./src/lib/dateFormat.js","webpack:///./node_modules/@mdx-js/tag/dist/index.js","webpack:///./node_modules/@mdx-js/tag/dist/mdx-tag.js","webpack:///./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","webpack:///./src/components/EndButtons.jsx","webpack:///./src/lib/twitter.js","webpack:///./src/components/Disqus.jsx","webpack:///./src/components/BlogPageLayout.jsx","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./node_modules/@babel/runtime/helpers/extends.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./node_modules/gatsby-image/index.js","webpack:///./src/components/Image.jsx","webpack:///./src/components/CaptionedImage.jsx","webpack:///./node_modules/core-js/modules/es6.function.bind.js","webpack:///./node_modules/core-js/modules/_bind.js","webpack:///./node_modules/core-js/modules/es7.array.includes.js","webpack:///./node_modules/core-js/modules/es6.string.includes.js","webpack:///./node_modules/core-js/modules/_string-context.js","webpack:///./node_modules/core-js/modules/_fails-is-regexp.js","webpack:///./node_modules/core-js/modules/es6.date.now.js"],"names":["DataLink","handleOnClick","toAppend","data","objectSpread_default","timestamp","Date","now","this","props","json","JSON","stringify","encoded","btoa","href","includes","string","el","document","createElement","value","style","body","appendChild","range","createRange","contentEditable","readOnly","selectNodeContents","s","window","getSelection","removeAllRanges","addRange","setSelectionRange","execCommand","iosCopyToClipboard","querySelectorAll","forEach","render","react_default","a","className","onClick","bind","children","React","Component","TrestleBlogPostLink","DataLink_DataLink","referrer","__webpack_exports__","_ref","components","objectWithoutPropertiesLoose_default","dist","name","Layout","DefaultLayout","layoutProps","CaptionedImage","filename","alt","caption","DataLink_TrestleBlogPostLink","parentName","metaString","_frontmatter","GlobalStyle","createGlobalStyle","_templateObject","bariol_eot","bariol_woff","bariol_ttf","bariol_svg","Div","styled","div","withConfig","displayName","componentId","UL","nav","ul","LI","li","P","p","A","_interopRequireDefault","__webpack_require__","exports","__esModule","withPrefix","navigateTo","replace","push","navigate","default","_objectWithoutPropertiesLoose2","_extends2","_inheritsLoose2","_assertThisInitialized2","_defineProperty2","_propTypes","_react","_router","_gatsby","path","normalizePath","NavLinkPropTypes","activeClassName","activeStyle","object","GatsbyLink","_React$Component","_this","call","isCurrent","filter","Boolean","join","IOSupported","IntersectionObserver","state","handleRef","_proto","prototype","componentDidUpdate","prevProps","prevState","to","___loader","enqueue","parsePath","pathname","componentDidMount","ref","cb","io","_this2","innerRef","entries","entry","target","isIntersecting","intersectionRatio","unobserve","disconnect","observe","_this3","_this$props","_this$props$getProps","getProps","defaultGetProps","_onClick","_onMouseEnter","onMouseEnter","rest","prefixedTo","Link","e","hovering","button","defaultPrevented","metaKey","altKey","ctrlKey","shiftKey","preventDefault","propTypes","func","isRequired","bool","_default","options","___navigate","console","warn","___push","___replace","d","blue","blueHighlight","Object","defineProperty","withMDXComponents","undefined","_extends","assign","i","arguments","length","source","key","hasOwnProperty","_react2","_createReactContext3","_propTypes2","obj","_createReactContext","Provider","Consumer","keys","indexOf","_objectWithoutProperties","contextComponents","MDXProvider","_ref2","element","module","excluded","sourceKeys","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_components_default__WEBPACK_IMPORTED_MODULE_1__","_components_colors__WEBPACK_IMPORTED_MODULE_2__","styled_components__WEBPACK_IMPORTED_MODULE_3__","react_icons_io__WEBPACK_IMPORTED_MODULE_4__","react_icons_fa__WEBPACK_IMPORTED_MODULE_5__","StyledNav","Title","NavLinks","NavLink","StyledA","Nav","blog","aria-label","color","size","BlogPostContainer","darkened","css","TitleContainer","Heading","h1","DateContainer","BlogPostMeta","react__WEBPACK_IMPORTED_MODULE_1___default","react_helmet__WEBPACK_IMPORTED_MODULE_3__","title","date","Container","MarkdownContent","elements","ReactDOM","findDOMNode","hljs","highlightBlock","formatDateString","dateString","toLocaleDateString","year","month","day","_mdxTag","enumerable","get","_mdxProvider","_createClass","defineProperties","descriptor","configurable","writable","Constructor","protoProps","staticProps","_hoistNonReactStatics2","defaults","inlineCode","wrapper","MDXTag","_Component","instance","TypeError","_classCallCheck","self","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","apply","subClass","superClass","create","constructor","setPrototypeOf","_inherits","_props","_props$props","childProps","_props$components","REACT_STATICS","childContextTypes","contextTypes","defaultProps","getDefaultProps","getDerivedStateFromProps","mixins","type","KNOWN_STATICS","caller","callee","arity","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","concat","ButtonStyle","margin","Button","components_default","url","newTab","label","EndButtons","text","twitterUrl","tweetTitle","tweetUrl","encodeURIComponent","EndButtons_Button","fa","Wrapper","Disqus","id","src","setAttribute","head","NonContent","BlogPageLayout","isDarkMode","matchMedia","matches","BlogPageLayout_Container","Helmet","rel","content","property","location","pageContext","frontmatter","staticPreview","BlogPost","EndButtons_EndButtons","Disqus_Disqus","ReactGA","initialize","pageview","search","r","graphql","StaticQueryContext","StaticQuery","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3__","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3___default","_parse_path__WEBPACK_IMPORTED_MODULE_4__","createContext","staticQueryData","query","Error","PropTypes","m","require","ProdPageRenderer","pageResources","loader","getResourcesForPathnameSync","InternalPageRenderer","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default","shape","convertProps","convertedProps","resolutions","fixed","sizes","fluid","imageCache","inImageCache","listeners","listenToIntersections","l","rootMargin","noscriptImg","srcSetWebp","srcSet","width","height","opacity","transitionDelay","Img","forwardRef","onLoad","onError","otherProps","position","top","left","objectFit","objectPosition","Image","isVisible","imgLoaded","fadeIn","seenBefore","critical","hasNoScript","imageRef","createRef","handleImageLoaded","img","current","complete","setState","_convertProps","_convertProps$style","_convertProps$imgStyl","imgStyle","_convertProps$placeho","placeholderStyle","backgroundColor","Tag","bgColor","imagePlaceholderStyle","transition","imageStyle","image","overflow","paddingBottom","aspectRatio","base64","tracedSVG","bottom","right","dangerouslySetInnerHTML","__html","_image","divStyle","display","fixedObject","number","srcWebp","fluidObject","oneOfType","gatsby_browser_entry","images","edges","find","node","relativePath","childImageSharp","publicURL","imageSizes","gatsby_image_default","_2351125363","Wrap","max","Caption","components_Image","$export","aFunction","isObject","invoke","arraySlice","slice","factories","Function","that","fn","partArgs","bound","args","F","len","construct","$includes","context","searchString","isRegExp","defined","NAME","String","MATCH","KEY","re","f","S","getTime"],"mappings":"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","file":"component---src-pages-blog-data-over-the-app-store-mdx-2a32bab063de65bcb657.js","sourcesContent":["import React from 'react';\n\nfunction iosCopyToClipboard(string) {\n    let el = document.createElement(\"input\");\n    el.value = string;\n    el.style = \"position: absolute; top: 0; left: 0; width: 100%; font-size: 0; opacity: 0.0\";\n    document.body.appendChild(el);\n    let range = document.createRange();\n\n    el.contentEditable = true;\n    el.readOnly = false;\n    range.selectNodeContents(el);\n\n    var s = window.getSelection();\n    s.removeAllRanges();\n    s.addRange(range);\n\n    // A big number, to cover anything that could be inside the element.\n    el.setSelectionRange(0, 999999);\n\n    return document.execCommand('copy');\n}\n\nexport default class DataLink extends React.Component {\n    handleOnClick() {\n        let data = {\n            timestamp: Date.now(),\n            ...this.props.data\n        }\n        let json = JSON.stringify(data);\n        let encoded = btoa(json)\n        let toAppend;\n        if (this.props.href.includes(\"?\")) {\n            toAppend = \"&ed=\" + encoded\n        } else {\n            toAppend = \"?ed=\" + encoded\n        }\n        iosCopyToClipboard(this.props.href + toAppend);\n        document.querySelectorAll(\"a.data-link\").forEach(function(el) {\n            el.href = el.href + \"&retry=1\"\n        });\n    }\n\n    render() {\n        return (\n            <a className={\"data-link\"} href={this.props.href} onClick={this.handleOnClick.bind(this)}>{this.props.children}</a>\n        );\n    }\n};\n\nexport const TrestleBlogPostLink = (props) => {\n    return (<DataLink data={{\"referrer\": \"pasteboard-blog-post\"}} href={\"https://itunes.apple.com/us/app/trestle-the-new-sudoku/id1300230302?mt=8\"}>{props.children}</DataLink>);\n};","import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nimport DefaultLayout from \"/Users/noahgilmore/code/noahgilmore.com/src/components/BlogPageLayout.jsx\"\nimport { TrestleBlogPostLink } from \"../../components/DataLink\";\nimport CaptionedImage from '../../components/CaptionedImage';\n\nexport default ({components, ...props}) => <MDXTag name=\"wrapper\" Layout={DefaultLayout} layoutProps={props} components={components}>\n\n\n<CaptionedImage filename=\"safari-trestle.png\" alt=\"Safari and Trestle icons\" caption=\"Safari and Trestle icons\" />\n<MDXTag name=\"p\" components={components}>{`About a year ago I wrote a puzzle game called `}<TrestleBlogPostLink>{`Trestle`}</TrestleBlogPostLink>{`. If you download it using `}<TrestleBlogPostLink>{`this link`}</TrestleBlogPostLink>{` or any of the links in this post (by clicking on them on your iOS device), you'll get a nice Easter egg and two of the (normally paid) level sets enabled for free.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`In this post, I'm going to describe the technique behind how I implemented this referral link without a backend or third party service, using `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`UIPasteboard`}</MDXTag>{`.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"em\" components={components} parentName=\"p\">{`Disclaimer: I'm not recommending you use this in production to power your business-critical flows, since it's a non-standard use of an API and a few things could change that would break it. It might be tenable in small use cases, but might also be grounds for App Store rejection. Use at your own risk.`}</MDXTag></MDXTag>\n<MDXTag name=\"h1\" components={components}>{`Background`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`It's common in iOS development, especially when you have a mobile web version of a product along with an app, to want to take some action on first app launch based on how the user was interacting with your product before.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`As an example, imagine you're Facebook and the user is viewing a profile in Safari, then decides to download the app via a button on the page - you'd ideally open that profile when the app launches. I like to call this \"passing data over the app store\", and Apple doesn't provide an official API for it.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`There are tricky ways to hack around this restriction - one of the most common is called \"fingerprinting\", where you use a variety of signals to try to link a user's web session to their app session. With this technique, you collect data about the user's browser (IP address, etc) beforehand, and make a call to your server on app launch to try to give your app data about what flow to present, if any.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`The implementation of this approach is pretty involved and usually implemented by a third party company like `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://branch.io/\"}}>{`Branch`}</MDXTag>{`, or with your own backend if you're a big enough operation. I'm going to describe a simpler method which requires no backend (and doesn't track any remote user data) using `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://developer.apple.com/documentation/uikit/uipasteboard\"}}>{`UIPasteboard`}</MDXTag>{`.`}</MDXTag>\n<MDXTag name=\"h1\" components={components}>{`The idea`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`The general approach looks like this:`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`Write a link on your website which, on click, both opens the url and copies it into the pasteboard with data encoded as a url parameter`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`On `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`didFinishLaunchingWithOptions`}</MDXTag>{`, read the pasteboard, decode the data, and use it to take action`}</MDXTag>\n</MDXTag>\n<CaptionedImage filename=\"pasteboard-diagram.png\" alt=\"Diagram showing Safari connected with Trestle over the app store via UIPasteboard\" caption=\"\" />\n<MDXTag name=\"h2\" components={components}>{`Step 1: Copying a link (Javascript)`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`In Javascript (depending on your browser) it's possible to programmatically copy to the clipboard using `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`document.execCommand(\"copy\")`}</MDXTag>{` (see `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand\"}}>{`MDN docs`}</MDXTag>{`). The API is a little finicky - you have to construct a DOM element and fill it with the content you want to copy, and you can only use `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`input`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`textarea`}</MDXTag>{` elements, but it works! I tested this on iOS 11 and 12, but according to `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://caniuse.com/#feat=clipboard\"}}>{`caniuse`}</MDXTag>{` it looks like it's supported as far back as iOS 10. It even works on mobile Chrome (note though - it won't work in the iOS simulator).`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Here's the code to copy a string to the pasteboard (thanks in part to `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://stackoverflow.com/questions/34045777/copy-to-clipboard-using-javascript-in-ios\"}}>{`this stackoverflow post`}</MDXTag>{`):`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-javascript\",\"metaString\":\"\"}}>{`function iosCopyToClipboard(string) {\n    let el = document.createElement(\"input\");\n    el.contentEditable = true;\n    el.readOnly = false;\n    el.value = string;\n    el.style = \"position: absolute; top: 0; left: 0; width: 100%; font-size: 0; opacity: 0.0\";\n    document.body.appendChild(el);\n\n    let range = document.createRange();\n    range.selectNodeContents(el);\n    let s = window.getSelection();\n    s.removeAllRanges();\n    s.addRange(range);\n\n    // A big number, to cover anything that could be inside the element.\n    el.setSelectionRange(0, 999999);\n\n    return document.execCommand('copy');\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`(You might notice the odd CSS on this element - we have to make it the whole width of the page or else Safari might zoom to it before opening the link, and we have to make it opaque and font-size 0 in order to avoid showing an iOS selection UI.)`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Once we've got this working, it's easy enough to take some data, base64 encode it, and copy it to the clipboard in addition to the link's href. We'll add a custom parameter to the copied url (I've called the parameter `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ed`}</MDXTag>{` for \"encoded data\"). Note that we include a timestamp of when the link was clicked - we'll need this for later. I'm using React here, but other frameworks or even `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"http://vanilla-js.com/\"}}>{`vanilla JS`}</MDXTag>{` should be similar:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-jsx\",\"metaString\":\"\"}}>{`class DataLink extends React.Component {\n    handleOnClick() {\n        let data = {\n            timestamp: Date.now(),\n            ...this.props.data\n        }\n        let json = JSON.stringify(data);\n        let encoded = btoa(json)\n        let toAppend;\n        if (this.props.href.includes(\"?\")) {\n            toAppend = \"&ed=\" + encoded\n        } else {\n            toAppend = \"?ed=\" + encoded\n        }\n        iosCopyToClipboard(this.props.href + toAppend);\n    }\n\n    render() {\n        return (\n            <a href={this.props.href} onClick={this.handleOnClick.bind(this)}>{\n                this.props.children}\n            </a>\n        );\n    }\n};\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Now, let's construct a link with JSON data that we want to pass to our app:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-jsx\",\"metaString\":\"\"}}>{`const TrestleBlogPostLink = (props) => {\n    let data = {\"referrer\": \"pasteboard-blog-post\"};\n    return (\n        <DataLink\n            data={data}\n            href={\"https://itunes.apple.com/us/app/trestle-the-new-sudoku/id1300230302?mt=8\"}\n        >\n            {props.children}\n        </DataLink>);\n};\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`When the user clicks on this link they'll be redirected to the app store, with the modified link in their pasteboard.`}</MDXTag>\n<MDXTag name=\"h2\" components={components}>{`Step 2: Reading the link (Swift)`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`From the app side, we'll hook into `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://developer.apple.com/documentation/uikit/uipasteboard\"}}>{`UIPasteboard`}</MDXTag>{`, a UIKit class which allows your app to integrate with iOS's copy and paste functionality. You can access the current contents of the general pasteboard (the one that gets updated when the user copies and pastes) using `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`UIPasteboard.general`}</MDXTag>{` - `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`UIPasteboard.general.strings`}</MDXTag>{` gives you the current text contents (pasteboard can also hold images, colors, etc).`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`For `}<TrestleBlogPostLink>{`Trestle`}</TrestleBlogPostLink>{`, I decided to encapsulate this functionality into an `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`AppStoreBridge`}</MDXTag>{` class - this class will have the responsibility of checking the pasteboard and reporting to its delegate if it sees a referral link.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`protocol AppStoreBridgeDelegate: class {\n    func appStoreBridge(\n        _ bridge: AppStoreBridge,\n        didTriggerCampaignLinkReferrer: String\n    )\n}\n\nfinal class AppStoreBridge {\n    static let shared = AppStoreBridge()\n\n    weak var delegate: AppStoreBridgeDelegate?\n\n    func checkForReferralLinks() {\n        // Check the UIPasteboard here...\n    }\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`To fill in the body of `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`checkForReferralLinks`}</MDXTag>{`, let's first define the referral data we're looking for:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`struct ReferralData: Codable {\n    let timestamp: TimeInterval\n    let referrer: String\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Now we'll iterate through all the strings in the pasteboard, and check them (using a wall of `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`guard`}</MDXTag>{` statements) to see the URL we're expecting: `}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`let pasteboard = UIPasteboard.general\nguard let strings = pasteboard.strings else { return }\nfor string in strings {\n    if string.contains(\"id1300230302\") {\n        guard let url = URL(string: string) else { return }\n        guard let components = URLComponents(\n            url: url,\n            resolvingAgainstBaseURL: false\n        ) else { return }\n        guard let queryItems = components.queryItems else { return }\n        guard let value = queryItems.filter(\n            { \\$0.name == \"ed\" }\n        ).first?.value else { return }\n        guard let data = Data(base64Encoded: value) else { return }\n        let decoder = JSONDecoder()\n        guard let referral = try? decoder.decode(\n            ReferralData.self,\n            from: data\n        ) else { return }\n        /// Use the referral object...\n    }\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Note here that we use a string that we know will be in the URL (`}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`\"id1300230302\"`}</MDXTag>{`) to quickly filter out any other pasteboard items.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Now all that's left is to report the referral! However, we probably only want to take action if the user recently clicked the link - I used a timeout of 5 minutes here:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`let referralClickDate = Date(timeIntervalSince1970: referral.timestamp)\nlet currentDate = Date()\nif currentDate.minutes(from: referralClickDate) < 5 {\n    self.delegate?.appStoreBridge(\n        self,\n        didTriggerCampaignLinkReferrer: referral.referrer\n    )\n    return\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`The small Date extension to make this possible looks like:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`extension Date {\n    func minutes(from date: Date) -> Int {\n        return Calendar.current.dateComponents(\n            [.minute],\n            from: date,\n            to: self\n        ).minute ?? 0\n    }\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`And we're done! Our app store bridge tells the app delegate that it noticed a referral, and we can then take any action we want!`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`extension AppDelegate: AppStoreBridgeDelegate {\n    func appStoreBridge(\n        _ bridge: AppStoreBridge,\n        didTriggerCampaignLink referrer: String\n    ) {\n        if referrer == \"pasteboard-blog-post\" {\n            // Show an easter egg, unlock level sets, etc...\n        }\n    }\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h1\" components={components}>{`UX considerations`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`There are a couple of user experience issues to keep in mind here:`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`Using this technique clobbers whatever's in the user's pasteboard currently. Usually this won't be a problem, because users should understand the pasteboard is ephemeral, but you might not want to do this if copying and pasting in your web app is a common use case (text editor, etc).`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`It's important to remember, on your call to `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`didTriggerCampaignLink`}</MDXTag>{`, to save some sort of flag locally so as not to accidentally trigger the referral link the next time the user opens the app. Trestle uses UserDefaults for this, which is probably as good a store as any.`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"h1\" components={components}>{`Security considerations`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`We should always consider approaches like this with security in mind, and this technique warrants a few very important considerations:`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`If you take any action from the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`AppStoreBridge`}</MDXTag>{`, assume that `}<MDXTag name=\"em\" components={components} parentName=\"li\">{`anyone`}</MDXTag>{` can trigger that action `}<MDXTag name=\"em\" components={components} parentName=\"li\">{`at any time`}</MDXTag>{`. This means you don't want to take actions that expose private data, make payments, etc. Consider your `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`AppStoreBridge`}</MDXTag>{` functionality as publicly exposed, since an attacker could pre-populate the pasteboard with anything they want to trigger the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`AppStoreBridge`}</MDXTag>{` logic.`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`Don't expose any private information via the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`DataLink`}</MDXTag>{`, `}<MDXTag name=\"em\" components={components} parentName=\"li\">{`especially`}</MDXTag>{` not user session tokens. Other apps can read the pasteboard too, so assume that all data encoded in a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`DataLink`}</MDXTag>{` will be publicly available to anyone. Don't include anything in a data link that could be associated with a user's PII (personally identifiable information) including emails, locations, etc.`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"h1\" components={components}>{`Will this get my app rejected?`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://developer.apple.com/app-store/review/guidelines/#software-requirements\"}}>{`Section 2.5.1 of the App Store Review Guidelines`}</MDXTag>{` says the following:`}</MDXTag>\n<MDXTag name=\"blockquote\" components={components}>\n<MDXTag name=\"p\" components={components} parentName=\"blockquote\">{`Apps should use APIs and frameworks for their intended purposes and indicate that integration in their app description.`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Though this is probably referring more to frameworks like HomeKit (mentioned as an example), using `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`UIPasteboard`}</MDXTag>{` as described in this post is technically an unintended use of the API. Your mileage might vary, and I'm not claiming anything about this approach.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`There are also a few things that could change that would throw a wrench in things - the behavior of the execCommand could change, Apple could change the behavior of the general pasteboard, etc. This technique was a good use case for `}<TrestleBlogPostLink>{`Trestle`}</TrestleBlogPostLink>{`, but might not match yours. `}</MDXTag>\n<MDXTag name=\"h1\" components={components}>{`Conclusion`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Hopefully this was an interesting technical discussion of a simple way to get around a complicated problem, and provide user delight in the flow from mobile web to app. If you have any other hacky ideas about how to pass data across the app store, feel free to `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://twitter.com/noahsark769\"}}>{`reach out`}</MDXTag>{`. (And if you'd like to see `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`UIPasteboard`}</MDXTag>{` in action, you can download Trestle using `}<TrestleBlogPostLink>{`this link`}</TrestleBlogPostLink>{`.)`}</MDXTag></MDXTag>\n\nexport const _frontmatter = {};\n\n  ","import styled from \"styled-components\";\nimport { createGlobalStyle } from 'styled-components'\nimport bariol_eot from '../fonts/Bariol-Regular.eot';\nimport bariol_woff from '../fonts/Bariol-Regular.woff';\nimport bariol_ttf from '../fonts/Bariol-Regular.ttf';\nimport bariol_svg from '../fonts/Bariol-Regular.svg';\n\nexport const GlobalStyle = createGlobalStyle`\n    @font-face {\n        font-family: 'Bariol';\n        src: url('${bariol_eot}');\n        src: url('${bariol_eot}?#iefix') format('embedded-opentype'),\n             url('${bariol_woff}') format('woff'),\n             url('${bariol_ttf}') format('truetype'),\n             url('${bariol_svg}#svgBariolRegular') format('svg');\n    }\n\n    * {\n        box-sizing: border-box !important;\n    }\n\n    body {\n        margin: 0;\n        padding: 0;\n    }\n`;\n\nexport const Div = styled.div``;\nexport const Nav = styled.nav``;\nexport const UL = styled.ul`\n    margin: 0;\n    padding: 0;\n`;\nexport const LI = styled.li`\n    margin: 0;\n    padding: 0;\n`;\nexport const P = styled.p`\n    margin: 0;\n    padding: 0;\n`;\n\nexport const A = styled.a`\n    &, &:hover, &:focus {\n        outline: none;\n        color: inherit;\n        text-decoration: none;\n    }\n`;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.withPrefix = withPrefix;\nexports.navigateTo = exports.replace = exports.push = exports.navigate = exports.default = void 0;\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _router = require(\"@reach/router\");\n\nvar _gatsby = require(\"gatsby\");\n\n/*global __PATH_PREFIX__ */\nfunction withPrefix(path) {\n  return normalizePath(__PATH_PREFIX__ + \"/\" + path);\n}\n\nfunction normalizePath(path) {\n  return path.replace(/\\/+/g, \"/\");\n}\n\nvar NavLinkPropTypes = {\n  activeClassName: _propTypes.default.string,\n  activeStyle: _propTypes.default.object // Set up IntersectionObserver\n\n};\n\nvar handleIntersection = function handleIntersection(el, cb) {\n  var io = new window.IntersectionObserver(function (entries) {\n    entries.forEach(function (entry) {\n      if (el === entry.target) {\n        // Check if element is within viewport, remove listener, destroy observer, and run link callback.\n        // MSEdge doesn't currently support isIntersecting, so also test for  an intersectionRatio > 0\n        if (entry.isIntersecting || entry.intersectionRatio > 0) {\n          io.unobserve(el);\n          io.disconnect();\n          cb();\n        }\n      }\n    });\n  }); // Add element to the observer\n\n  io.observe(el);\n};\n\nvar GatsbyLink =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(GatsbyLink, _React$Component);\n\n  function GatsbyLink(props) {\n    var _this;\n\n    _this = _React$Component.call(this) || this; // Default to no support for IntersectionObserver\n\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"defaultGetProps\", function (_ref) {\n      var isCurrent = _ref.isCurrent;\n\n      if (isCurrent) {\n        return {\n          className: [_this.props.className, _this.props.activeClassName].filter(Boolean).join(\" \"),\n          style: (0, _extends2.default)({}, _this.props.style, _this.props.activeStyle)\n        };\n      }\n\n      return null;\n    });\n    var IOSupported = false;\n\n    if (typeof window !== \"undefined\" && window.IntersectionObserver) {\n      IOSupported = true;\n    }\n\n    _this.state = {\n      IOSupported: IOSupported\n    };\n    _this.handleRef = _this.handleRef.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    return _this;\n  }\n\n  var _proto = GatsbyLink.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    // Preserve non IO functionality if no support\n    if (this.props.to !== prevProps.to && !this.state.IOSupported) {\n      ___loader.enqueue((0, _gatsby.parsePath)(this.props.to).pathname);\n    }\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    // Preserve non IO functionality if no support\n    if (!this.state.IOSupported) {\n      ___loader.enqueue((0, _gatsby.parsePath)(this.props.to).pathname);\n    }\n  };\n\n  _proto.handleRef = function handleRef(ref) {\n    var _this2 = this;\n\n    this.props.innerRef && this.props.innerRef(ref);\n\n    if (this.state.IOSupported && ref) {\n      // If IO supported and element reference found, setup Observer functionality\n      handleIntersection(ref, function () {\n        ___loader.enqueue((0, _gatsby.parsePath)(_this2.props.to).pathname);\n      });\n    }\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    var _this$props = this.props,\n        to = _this$props.to,\n        _this$props$getProps = _this$props.getProps,\n        getProps = _this$props$getProps === void 0 ? this.defaultGetProps : _this$props$getProps,\n        _onClick = _this$props.onClick,\n        _onMouseEnter = _this$props.onMouseEnter,\n        $activeClassName = _this$props.activeClassName,\n        $activeStyle = _this$props.activeStyle,\n        $ref = _this$props.ref,\n        $innerRef = _this$props.innerRef,\n        state = _this$props.state,\n        replace = _this$props.replace,\n        rest = (0, _objectWithoutPropertiesLoose2.default)(_this$props, [\"to\", \"getProps\", \"onClick\", \"onMouseEnter\", \"activeClassName\", \"activeStyle\", \"ref\", \"innerRef\", \"state\", \"replace\"]);\n    var prefixedTo = withPrefix(to);\n    return _react.default.createElement(_router.Link, (0, _extends2.default)({\n      to: prefixedTo,\n      state: state,\n      getProps: getProps,\n      innerRef: this.handleRef,\n      onMouseEnter: function onMouseEnter(e) {\n        // eslint-disable-line\n        _onMouseEnter && _onMouseEnter(e);\n\n        ___loader.hovering((0, _gatsby.parsePath)(to).pathname);\n      },\n      onClick: function onClick(e) {\n        // eslint-disable-line\n        _onClick && _onClick(e);\n\n        if (e.button === 0 && // ignore right clicks\n        !_this3.props.target && // let browser handle \"target=_blank\"\n        !e.defaultPrevented && // onClick prevented default\n        !e.metaKey && // ignore clicks with modifier keys...\n        !e.altKey && !e.ctrlKey && !e.shiftKey) {\n          e.preventDefault(); // Make sure the necessary scripts and data are\n          // loaded before continuing.\n\n          navigate(to, {\n            state: state,\n            replace: replace\n          });\n        }\n\n        return true;\n      }\n    }, rest));\n  };\n\n  return GatsbyLink;\n}(_react.default.Component);\n\nGatsbyLink.propTypes = (0, _extends2.default)({}, NavLinkPropTypes, {\n  innerRef: _propTypes.default.func,\n  onClick: _propTypes.default.func,\n  to: _propTypes.default.string.isRequired,\n  replace: _propTypes.default.bool\n});\nvar _default = GatsbyLink;\nexports.default = _default;\n\nvar navigate = function navigate(to, options) {\n  window.___navigate(withPrefix(to), options);\n};\n\nexports.navigate = navigate;\n\nvar push = function push(to) {\n  console.warn(\"The \\\"push\\\" method is now deprecated and will be removed in Gatsby v3. Please use \\\"navigate\\\" instead.\");\n\n  window.___push(withPrefix(to));\n};\n\nexports.push = push;\n\nvar replace = function replace(to) {\n  console.warn(\"The \\\"replace\\\" method is now deprecated and will be removed in Gatsby v3. Please use \\\"navigate\\\" instead.\");\n\n  window.___replace(withPrefix(to));\n}; // TODO: Remove navigateTo for Gatsby v3\n\n\nexports.replace = replace;\n\nvar navigateTo = function navigateTo(to) {\n  console.warn(\"The \\\"navigateTo\\\" method is now deprecated and will be removed in Gatsby v3. Please use \\\"navigate\\\" instead.\");\n  return push(to);\n};\n\nexports.navigateTo = navigateTo;","export const blue = 'rgba(128, 165, 177, 1)';\nexport const blueHighlight = 'rgba(151, 195, 210, 1)';","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withMDXComponents = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _createReactContext2 = require('create-react-context');\n\nvar _createReactContext3 = _interopRequireDefault(_createReactContext2);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar _createReactContext = (0, _createReactContext3.default)({}),\n    Provider = _createReactContext.Provider,\n    Consumer = _createReactContext.Consumer;\n\nvar withMDXComponents = function withMDXComponents(Component) {\n  return function (_ref) {\n    var components = _ref.components,\n        props = _objectWithoutProperties(_ref, ['components']);\n\n    return _react2.default.createElement(\n      Consumer,\n      null,\n      function (contextComponents) {\n        return _react2.default.createElement(Component, _extends({ components: components || contextComponents }, props));\n      }\n    );\n  };\n};\n\nexports.withMDXComponents = withMDXComponents;\nvar MDXProvider = function MDXProvider(_ref2) {\n  var components = _ref2.components,\n      children = _ref2.children;\n  return _react2.default.createElement(\n    Provider,\n    { value: components },\n    children\n  );\n};\n\nMDXProvider.propTypes = {\n  components: _propTypes2.default.object.isRequired,\n  children: _propTypes2.default.element.isRequired\n};\n\nexports.default = MDXProvider;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-4afd94f0fd93a1f63b46c6c6ad792f71.woff\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-8a7d23d53f8d118e190c63e4e81a91fe.ttf\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-75b90056f4cdf5a742897ec0a59569d7.svg\";","import React from 'react';\nimport { A, UL, LI } from '../components/default';\nimport { blue, blueHighlight } from '../components/colors';\nimport styled from \"styled-components\";\nimport { IoIosHome, IoIosAppstore } from \"react-icons/io\";\nimport { FaTwitter } from \"react-icons/fa\";\n\nconst StyledNav = styled.nav`\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    padding: 20px 60px;\n    border-bottom: 1px solid #ddd;\n\n    @media all and (max-width: 600px) {\n        padding: 20px;\n    }\n\n    @media (prefers-color-scheme: dark) {\n        border-color: #777;\n    }\n`;\n\nconst Title = styled.div`\n    flex: 2;\n    font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 28px;\n    font-display: swap;\n\n    @media (prefers-color-scheme: dark) {\n        color: #fff;\n    }\n`;\n\nconst NavLinks = styled(UL)`\n    flex: 10;\n    display: flex;\n    flex-direction: horizontal;\n    flex-wrap: wrap;\n    justify-content: flex-end;\n    height: 100%;\n    align-self: center;\n`;\n\nconst NavLink = styled(LI)`\n    display: flex;\n    flex-direction: vertical;\n    align-items: center;\n    text-align: center;\n    font-family: \"Bariol\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 16px;\n    padding: 0px 20px;\n`;\n\nconst StyledA = styled(A)`\n    height: auto;\n    color: ${blue};\n    display: flex;\n    flex-direction: vertical;\n    align-items: center;\n\n    -webkit-transition: 0.2s ease-in-out;\n    -moz-transition: 0.2s ease-in-out;\n    -o-transition: 0.2s ease-in-out;\n    transition: 0.2s ease-in-out;\n\n    &:hover {\n        color: ${blueHighlight};\n    }\n`;\n\nconst Nav = (props) => {\n    return (\n        <StyledNav>\n            <Title><StyledA href={props.blog ? '/blog' : '/'}>NOAH GILMORE</StyledA></Title>\n            <NavLinks>\n                <NavLink><StyledA aria-label=\"Blog Home\" href=\"/blog\"><IoIosHome color={blue} size=\"24\" /></StyledA></NavLink>\n                <NavLink><StyledA aria-label=\"Twitter\" href=\"https://twitter.com/noahsark769\"><FaTwitter color={blue} size=\"24\" /></StyledA></NavLink>\n                <NavLink><StyledA aria-label=\"App Store\" href=\"https://appstore.com/trestle\"><IoIosAppstore color={blue} size=\"24\" /></StyledA></NavLink>\n            </NavLinks>\n        </StyledNav>\n    );\n};\n\nexport default Nav;","import React from 'react';\nimport styled, { css } from \"styled-components\";\nimport { Helmet } from \"react-helmet\";\n\nexport const BlogPostContainer = styled.div`\n    padding: 60px 0;\n    margin: 0 auto;\n    width: 90%;\n    @media all and (min-width: 600px) {\n        max-width: 700px;\n        margin: auto;\n    }\n\n    @media all and (max-width: 600px) {\n        width: 100%;\n        padding: 20px 0;\n        ${(props) => props.darkened && css`\n            background-color: #f6f6f6;\n            @media (prefers-color-scheme: dark) {\n                background-color: inherit;\n            }\n        `}\n    }\n`;\n\nconst TitleContainer = styled.div`\n    width: 100%;\n    margin-bottom: 40px;\n`;\n\nconst Heading = styled.h1`\n    width: 100%;\n    font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 34px;\n    margin-bottom: 10px;\n\n    @media (prefers-color-scheme: dark) {\n        color: #fff;\n    }\n`;\n\nconst DateContainer = styled.p`\n    font-family: \"Gentium Book Basic\", times, serif;\n    font-style: italic;\n    font-size: 16px;\n    color: #999;\n`;\n\nexport const BlogPostMeta = (props) => {\n    return (\n        <div>\n            <Helmet>\n                <title>{props.title}</title>\n            </Helmet>\n            <TitleContainer>\n                <Heading>{props.title}</Heading>\n                <DateContainer>{props.date}</DateContainer>\n            </TitleContainer>\n        </div>\n    );\n};\n\nexport default class BlogPost extends React.Component {\n    render() {\n        return (\n            <BlogPostContainer>\n                <div>\n                    {this.props.children}\n                </div>\n            </BlogPostContainer>\n        );\n    }\n};\n","import React from 'react';\nimport ReactDOM from \"react-dom\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n    p, li {\n        margin: 0;\n        padding: 0;\n        font-family: \"Gentium Book Basic\", times, serif;\n        font-size: 21px;\n        line-height: 29px;\n        color: #333;\n        padding-bottom: 15px;\n        margin-top: 15px;\n        @media all and (max-width: 600px) {\n            width: 90%;\n            margin: 15px auto 0 auto;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n        }\n    }\n\n    blockquote {\n        background-color: #faf9f7;\n        border-left: 4px solid #e5e4e1;\n        padding: 20px;\n        font-style: italic;\n\n        @media (prefers-color-scheme: dark) {\n            background-color: #3f3f3f;\n        }\n\n        p {\n            margin: 0;\n            padding: 0;\n            color: #555;\n\n            @media (prefers-color-scheme: dark) {\n                color: #fff;\n            }\n        }\n    }\n\n    a {\n        color: #1A3F4B;\n        -webkit-transition: 0.2s ease-in-out;\n        -moz-transition: 0.2s ease-in-out;\n        -o-transition: 0.2s ease-in-out;\n        transition: 0.2s ease-in-out;\n\n        @media (prefers-color-scheme: dark) {\n            color: #60b5d1;\n        }\n    }\n    a:hover {\n        color: #47656E;\n\n        @media (prefers-color-scheme: dark) {\n            color: #6bcfef;\n        }\n    }\n    code {\n        font-family: monospace;\n        font-size: 16px;\n        background-color: #faf9f7;\n        border: 1px solid #e5e4e1;\n        padding: 3px 5px;\n        margin: 0px 2px;\n        color: #555;\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n            background-color: #3f3f3f;\n        }\n    }\n    code:not(pre code) {\n        font-family: monospace;\n        font-size: 16px;\n        background-color: #faf9f7;\n        border: 1px solid #e5e4e1;\n        padding: 3px 5px;\n        margin: 0px 2px;\n        color: #555;\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n            background-color: #3f3f3f;\n        }\n    }\n    code:first-child {\n        margin-left: 0;\n    }\n    pre {\n        display: block;\n        margin: 0;\n        padding: 0;\n        background: none;\n        @media all and (max-width: 600px) {\n            width: 100%;\n            margin: 0 auto;\n        }\n    }\n    pre > code {\n        display: block;\n        margin: 0;\n        padding: 0;\n        border: 1px solid #e5e4e1;\n        border-radius: 2px;\n        padding: 10px;\n        margin-top: 10px;\n        font-family: monospace;\n        font-size: 14px;\n        line-height: 17px;\n        white-space: pre-wrap;\n\n        @media all and (max-width: 600px) {\n            font-size: 15px;\n            white-space: pre;\n            border-left: none;\n            border-right: none;\n            padding: 15px 5% 15px 5%;\n            width: 100%;\n        }\n    }\n\n    pre > code.language-nohighlight {\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n            background-color: #3f3f3f;\n        }\n    }\n\n    pre + p {\n        margin-top: 30px;\n    }\n    ol {\n        margin-left: 30px;\n        @media all and (max-width: 600px) {\n            width: 90%;\n            margin: 0 auto 0 30px;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n        }\n    }\n    ol li {\n        list-style-type: decimal;\n    }\n    ul li {\n        list-style-type: square;\n        margin-left: 40px;\n        @media all and (max-width: 600px) {\n            width: 90%;\n            margin: 0 auto;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n        }\n    }\n    h1, h2, h3, h4, h5, h6 {\n        width: 100%;\n        font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n        margin-bottom: 10px;   \n        margin-top: 40px;\n        @media all and (max-width: 600px) {\n            width: 90%;\n            margin: 40px auto 10px auto;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n        }\n    }\n    h1 {\n        font-size: 28px;\n    }\n    h2 {\n        font-size: 24px;\n    }\n    h3 {\n        font-size: 20px;\n    }\n\n    em {\n        font-style: italic;\n    }\n\n    strong {\n        font-weight: bold;\n    }\n`;\n\nexport default class MarkdownContent extends React.Component {\n    render() {\n        return (\n            <Container>\n                {this.props.children}\n            </Container>\n        );\n    }\n\n    componentDidMount() {\n        const node = ReactDOM.findDOMNode(this);\n        var elements = node.querySelectorAll(\"pre code\");\n        // this next line has to be stuck in the 90's\n        // https://css-tricks.com/snippets/javascript/loop-queryselectorall-matches/\n        for (var i = 0; i < elements.length; i++) {\n            // I would love to import the node version of hljs here, but it turns out\n            // this doesn't work due to something in gatsby-mdx's rendering. Oh well,\n            // we just import it in html.js and use the window version here.\n            window.hljs && window.hljs.highlightBlock(elements[i]);\n        }\n    }\n}","export function formatDateString(dateString) {\n    const date = new Date(dateString);\n    return date.toLocaleDateString(\"en-US\", {year: 'numeric', month: 'long', day: 'numeric'});\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _mdxTag = require('./mdx-tag');\n\nObject.defineProperty(exports, 'MDXTag', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mdxTag).default;\n  }\n});\n\nvar _mdxProvider = require('./mdx-provider');\n\nObject.defineProperty(exports, 'MDXProvider', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mdxProvider).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _mdxProvider = require('./mdx-provider');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaults = {\n  inlineCode: 'code',\n  wrapper: 'div'\n};\n\nvar MDXTag = function (_Component) {\n  _inherits(MDXTag, _Component);\n\n  function MDXTag() {\n    _classCallCheck(this, MDXTag);\n\n    return _possibleConstructorReturn(this, (MDXTag.__proto__ || Object.getPrototypeOf(MDXTag)).apply(this, arguments));\n  }\n\n  _createClass(MDXTag, [{\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          name = _props.name,\n          parentName = _props.parentName,\n          _props$props = _props.props,\n          childProps = _props$props === undefined ? {} : _props$props,\n          children = _props.children,\n          _props$components = _props.components,\n          components = _props$components === undefined ? {} : _props$components,\n          Layout = _props.Layout,\n          layoutProps = _props.layoutProps;\n\n\n      var Component = components[parentName + '.' + name] || components[name] || defaults[name] || name;\n\n      if (Layout) {\n        (0, _hoistNonReactStatics2.default)(this, Layout);\n\n        return _react2.default.createElement(\n          Layout,\n          _extends({ components: components }, layoutProps),\n          _react2.default.createElement(\n            Component,\n            childProps,\n            children\n          )\n        );\n      }\n\n      return _react2.default.createElement(\n        Component,\n        childProps,\n        children\n      );\n    }\n  }]);\n\n  return MDXTag;\n}(_react.Component);\n\nexports.default = (0, _mdxProvider.withMDXComponents)(MDXTag);","'use strict';\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n    childContextTypes: true,\n    contextTypes: true,\n    defaultProps: true,\n    displayName: true,\n    getDefaultProps: true,\n    getDerivedStateFromProps: true,\n    mixins: true,\n    propTypes: true,\n    type: true\n};\n\nvar KNOWN_STATICS = {\n    name: true,\n    length: true,\n    prototype: true,\n    caller: true,\n    callee: true,\n    arguments: true,\n    arity: true\n};\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = getPrototypeOf && getPrototypeOf(Object);\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n    if (typeof sourceComponent !== 'string') { // don't hoist over string (html) components\n\n        if (objectPrototype) {\n            var inheritedComponent = getPrototypeOf(sourceComponent);\n            if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n            }\n        }\n\n        var keys = getOwnPropertyNames(sourceComponent);\n\n        if (getOwnPropertySymbols) {\n            keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n        }\n\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!REACT_STATICS[key] && !KNOWN_STATICS[key] && (!blacklist || !blacklist[key])) {\n                var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                try { // Avoid failures from read-only properties\n                    defineProperty(targetComponent, key, descriptor);\n                } catch (e) {}\n            }\n        }\n\n        return targetComponent;\n    }\n\n    return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","import React from 'react';\nimport { A } from '../components/default';\nimport styled, { css } from \"styled-components\";\nimport { IoIosHome } from \"react-icons/io\";\nimport { FaTwitter } from \"react-icons/fa\";\nimport { blue, blueHighlight } from '../components/colors';\nimport { formatTweetIntentUrl } from '../lib/twitter';\n\nconst Container = styled.div`\n    width: 100%;\n    display: flex;\n    flex-direction: horizontal;\n    align-items: center;\n    justify-content: center;\n    margin-top: 40px;\n`;\n\nconst ButtonStyle = styled.div`\n    background-color: ${blue};\n    -webkit-transition: 0.2s ease-in-out;\n    -moz-transition: 0.2s ease-in-out;\n    -o-transition: 0.2s ease-in-out;\n    transition: 0.2s ease-in-out;\n\n    &:hover {\n        background-color: ${blueHighlight};\n    }\n\n    width: 100px;\n    padding: 10px 20px;\n    text-align: center;\n    display: flex;\n    flex-direction: vertical;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    ${(props) => props.margin && css`\n        margin-right: 20px;\n    `};\n`;\nconst Button = (props) => {\n    return (\n        <A href={props.url} target={props.newTab ? '_blank' : null} aria-label={props.label}><ButtonStyle margin={props.margin}>{props.children}</ButtonStyle></A>\n    );\n};\n\nexport default class EndButtons extends React.Component {\n    render() {\n        const twitterUrl = formatTweetIntentUrl(`Post by @noahsark769: ${this.props.tweetTitle} ${this.props.tweetUrl}`);\n        return (\n            <Container>\n                <Button label=\"Twitter\" url={twitterUrl} newTab margin><FaTwitter size={24} color='white'/></Button>\n                <Button label=\"Blog homepage\" url=\"/blog\"><IoIosHome size={24} color='white' /></Button>\n            </Container>\n        );\n    }\n};\n","export function formatTweetIntentUrl(text) {\n    const encodedText = encodeURIComponent(text);\n    return `https://twitter.com/intent/tweet?text=${encodedText}`;\n}","import React from 'react';\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n    margin-top: 80px;\n`;\n\nexport default class Disqus extends React.Component {\n    render() {\n        return (\n            <Wrapper>\n                <div id=\"disqus_thread\"></div>\n            </Wrapper>\n        )\n    }\n\n    componentDidMount() {\n       /**\n        *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n        *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n        /*\n        var disqus_config = function () {\n        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\n        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n        };\n        */\n        (function() { // DON'T EDIT BELOW THIS LINE\n        var d = document, s = d.createElement('script');\n        s.src = '//noahgilmore-com.disqus.com/embed.js';\n        s.setAttribute('data-timestamp', +new Date());\n        (d.head || d.body).appendChild(s);\n        })();     \n    }\n}","import React from 'react';\nimport { Helmet } from \"react-helmet\";\nimport { GlobalStyle } from './default';\nimport Nav from './Nav';\nimport EndButtons from './EndButtons';\nimport { BlogPostContainer, BlogPostMeta } from './BlogPost';\nimport MarkdownContent from './MarkdownContent';\nimport { formatDateString } from '../lib/dateFormat';\nimport Disqus from './Disqus';\nimport ReactGA from 'react-ga';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  @media (prefers-color-scheme: dark) {\n    background-color: #2b2c2f;\n  }\n`;\n\nconst NonContent = styled.div`\n    @media all and (max-width: 600px) {\n        padding-right: 5%;\n        padding-left: 5%;\n    }\n`;\n\nexport default class BlogPageLayout extends React.Component {\n    render() {\n      let isDarkMode = (typeof window !== 'undefined' && window.matchMedia(\"(prefers-color-scheme: dark)\").matches);\n        return (\n            <Container>\n              <GlobalStyle />\n              <Helmet>\n                  <link href='https://fonts.googleapis.com/css?family=Roboto:700' rel='stylesheet' type='text/css' />\n                  <link href=\"https://fonts.googleapis.com/css?family=Gentium+Book+Basic\" rel=\"stylesheet\" />\n                  {!isDarkMode && <link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.0/styles/atom-one-light.min.css\" />}\n                  {isDarkMode && <link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.0/styles/zenburn.min.css\" />}\n                  <meta name=\"twitter:card\" content=\"summary\" />\n                  <meta name=\"twitter:creator\" content=\"@noahsark769\" />\n                  <meta property=\"og:url\" content={`https://noahgilmore.com${this.props.location.pathname}`} />\n                  <meta property=\"og:title\" content={this.props.pageContext.frontmatter.title} />\n                  <meta property=\"og:description\" content={this.props.pageContext.frontmatter.staticPreview} />\n                  <meta name=\"description\" content={this.props.pageContext.frontmatter.staticPreview} />\n              </Helmet>\n              <Nav blog />\n              <BlogPostContainer>\n                <NonContent>\n                  <BlogPostMeta\n                      title={this.props.pageContext.frontmatter.title}\n                      date={formatDateString(this.props.pageContext.frontmatter.date)} />\n                </NonContent>\n                <MarkdownContent>\n                  {this.props.children}\n                </MarkdownContent>\n                <NonContent>\n                  <EndButtons tweetTitle={this.props.pageContext.frontmatter.title} tweetUrl={`https://noahgilmore.com${this.props.location.pathname}`} />\n                  <Disqus />\n                </NonContent>\n              </BlogPostContainer>\n            </Container>\n        )\n    }\n\n    componentDidMount() {\n        ReactGA.initialize('UA-35325391-1');\n        ReactGA.pageview(window.location.pathname + window.location.search);\n    }\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\n// Handle legacy names for image queries.\nvar convertProps = function convertProps(props) {\n  var convertedProps = (0, _extends2.default)({}, props);\n\n  if (convertedProps.resolutions) {\n    convertedProps.fixed = convertedProps.resolutions;\n    delete convertedProps.resolutions;\n  }\n\n  if (convertedProps.sizes) {\n    convertedProps.fluid = convertedProps.sizes;\n    delete convertedProps.sizes;\n  }\n\n  return convertedProps;\n}; // Cache if we've seen an image before so we don't both with\n// lazy-loading & fading in on subsequent mounts.\n\n\nvar imageCache = {};\n\nvar inImageCache = function inImageCache(props) {\n  var convertedProps = convertProps(props); // Find src\n\n  var src = convertedProps.fluid ? convertedProps.fluid.src : convertedProps.fixed.src;\n\n  if (imageCache[src]) {\n    return true;\n  } else {\n    imageCache[src] = true;\n    return false;\n  }\n};\n\nvar io;\nvar listeners = [];\n\nfunction getIO() {\n  if (typeof io === \"undefined\" && typeof window !== \"undefined\" && window.IntersectionObserver) {\n    io = new window.IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        listeners.forEach(function (l) {\n          if (l[0] === entry.target) {\n            // Edge doesn't currently support isIntersecting, so also test for an intersectionRatio > 0\n            if (entry.isIntersecting || entry.intersectionRatio > 0) {\n              io.unobserve(l[0]);\n              l[1]();\n            }\n          }\n        });\n      });\n    }, {\n      rootMargin: \"200px\"\n    });\n  }\n\n  return io;\n}\n\nvar listenToIntersections = function listenToIntersections(el, cb) {\n  getIO().observe(el);\n  listeners.push([el, cb]);\n};\n\nvar noscriptImg = function noscriptImg(props) {\n  // Check if prop exists before adding each attribute to the string output below to prevent\n  // HTML validation issues caused by empty values like width=\"\" and height=\"\"\n  var src = props.src ? \"src=\\\"\" + props.src + \"\\\" \" : \"src=\\\"\\\" \"; // required attribute\n\n  var sizes = props.sizes ? \"sizes=\\\"\" + props.sizes + \"\\\" \" : \"\";\n  var srcSetWebp = props.srcSetWebp ? \"<source type='image/webp' srcSet=\\\"\" + props.srcSetWebp + \"\\\" \" + sizes + \"/>\" : \"\";\n  var srcSet = props.srcSet ? \"<source srcSet=\\\"\" + props.srcSet + \"\\\" \" + sizes + \"/>\" : \"\";\n  var title = props.title ? \"title=\\\"\" + props.title + \"\\\" \" : \"\";\n  var alt = props.alt ? \"alt=\\\"\" + props.alt + \"\\\" \" : \"alt=\\\"\\\" \"; // required attribute\n\n  var width = props.width ? \"width=\\\"\" + props.width + \"\\\" \" : \"\";\n  var height = props.height ? \"height=\\\"\" + props.height + \"\\\" \" : \"\";\n  var opacity = props.opacity ? props.opacity : \"1\";\n  var transitionDelay = props.transitionDelay ? props.transitionDelay : \"0.5s\";\n  return \"<picture>\" + srcSetWebp + srcSet + \"<img \" + width + height + src + alt + title + \"style=\\\"position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:\" + transitionDelay + \";opacity:\" + opacity + \";width:100%;height:100%;object-fit:cover;object-position:center\\\"/></picture>\";\n};\n\nvar Img = _react.default.forwardRef(function (props, ref) {\n  var style = props.style,\n      onLoad = props.onLoad,\n      onError = props.onError,\n      otherProps = (0, _objectWithoutPropertiesLoose2.default)(props, [\"style\", \"onLoad\", \"onError\"]);\n  return _react.default.createElement(\"img\", (0, _extends2.default)({}, otherProps, {\n    onLoad: onLoad,\n    onError: onError,\n    ref: ref,\n    style: (0, _extends2.default)({\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      height: \"100%\",\n      objectFit: \"cover\",\n      objectPosition: \"center\"\n    }, style)\n  }));\n});\n\nImg.propTypes = {\n  style: _propTypes.default.object,\n  onError: _propTypes.default.func,\n  onLoad: _propTypes.default.func\n};\n\nvar Image =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(Image, _React$Component);\n\n  function Image(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this; // If this browser doesn't support the IntersectionObserver API\n    // we default to start downloading the image right away.\n\n    var isVisible = true;\n    var imgLoaded = true;\n    var IOSupported = false;\n    var fadeIn = props.fadeIn; // If this image has already been loaded before then we can assume it's\n    // already in the browser cache so it's cheap to just show directly.\n\n    var seenBefore = inImageCache(props);\n\n    if (!seenBefore && typeof window !== \"undefined\" && window.IntersectionObserver) {\n      isVisible = false;\n      imgLoaded = false;\n      IOSupported = true;\n    } // Always don't render image while server rendering\n\n\n    if (typeof window === \"undefined\") {\n      isVisible = false;\n      imgLoaded = false;\n    }\n\n    if (props.critical) {\n      isVisible = true;\n      imgLoaded = false;\n      IOSupported = false;\n    }\n\n    var hasNoScript = !(_this.props.critical && !_this.props.fadeIn);\n    _this.state = {\n      isVisible: isVisible,\n      imgLoaded: imgLoaded,\n      IOSupported: IOSupported,\n      fadeIn: fadeIn,\n      hasNoScript: hasNoScript,\n      seenBefore: seenBefore\n    };\n    _this.imageRef = _react.default.createRef();\n    _this.handleImageLoaded = _this.handleImageLoaded.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    _this.handleRef = _this.handleRef.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    return _this;\n  }\n\n  var _proto = Image.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.props.critical) {\n      var img = this.imageRef.current;\n\n      if (img && img.complete) {\n        this.handleImageLoaded();\n      }\n    }\n  };\n\n  _proto.handleRef = function handleRef(ref) {\n    var _this2 = this;\n\n    if (this.state.IOSupported && ref) {\n      listenToIntersections(ref, function () {\n        _this2.setState({\n          isVisible: true\n        });\n      });\n    }\n  };\n\n  _proto.handleImageLoaded = function handleImageLoaded() {\n    this.setState({\n      imgLoaded: true\n    });\n\n    if (this.state.seenBefore) {\n      this.setState({\n        fadeIn: false\n      });\n    }\n\n    this.props.onLoad && this.props.onLoad();\n  };\n\n  _proto.render = function render() {\n    var _convertProps = convertProps(this.props),\n        title = _convertProps.title,\n        alt = _convertProps.alt,\n        className = _convertProps.className,\n        _convertProps$style = _convertProps.style,\n        style = _convertProps$style === void 0 ? {} : _convertProps$style,\n        _convertProps$imgStyl = _convertProps.imgStyle,\n        imgStyle = _convertProps$imgStyl === void 0 ? {} : _convertProps$imgStyl,\n        _convertProps$placeho = _convertProps.placeholderStyle,\n        placeholderStyle = _convertProps$placeho === void 0 ? {} : _convertProps$placeho,\n        fluid = _convertProps.fluid,\n        fixed = _convertProps.fixed,\n        backgroundColor = _convertProps.backgroundColor,\n        Tag = _convertProps.Tag;\n\n    var bgColor = typeof backgroundColor === \"boolean\" ? \"lightgray\" : backgroundColor;\n    var imagePlaceholderStyle = (0, _extends2.default)({\n      opacity: this.state.imgLoaded ? 0 : 1,\n      transition: \"opacity 0.5s\",\n      transitionDelay: this.state.imgLoaded ? \"0.5s\" : \"0.25s\"\n    }, imgStyle, placeholderStyle);\n    var imageStyle = (0, _extends2.default)({\n      opacity: this.state.imgLoaded || this.state.fadeIn === false ? 1 : 0,\n      transition: this.state.fadeIn === true ? \"opacity 0.5s\" : \"none\"\n    }, imgStyle);\n\n    if (fluid) {\n      var image = fluid;\n      return _react.default.createElement(Tag, {\n        className: (className ? className : \"\") + \" gatsby-image-wrapper\",\n        style: (0, _extends2.default)({\n          position: \"relative\",\n          overflow: \"hidden\"\n        }, style),\n        ref: this.handleRef,\n        key: \"fluid-\" + JSON.stringify(image.srcSet)\n      }, _react.default.createElement(Tag, {\n        style: {\n          width: \"100%\",\n          paddingBottom: 100 / image.aspectRatio + \"%\"\n        }\n      }), image.base64 && _react.default.createElement(Img, {\n        alt: !this.state.isVisible ? alt : \"\",\n        title: title,\n        src: image.base64,\n        style: imagePlaceholderStyle\n      }), image.tracedSVG && _react.default.createElement(Img, {\n        alt: !this.state.isVisible ? alt : \"\",\n        title: title,\n        src: image.tracedSVG,\n        style: imagePlaceholderStyle\n      }), bgColor && _react.default.createElement(Tag, {\n        title: title,\n        style: {\n          backgroundColor: bgColor,\n          position: \"absolute\",\n          top: 0,\n          bottom: 0,\n          opacity: !this.state.imgLoaded ? 1 : 0,\n          transitionDelay: \"0.35s\",\n          right: 0,\n          left: 0\n        }\n      }), this.state.isVisible && _react.default.createElement(\"picture\", null, image.srcSetWebp && _react.default.createElement(\"source\", {\n        type: \"image/webp\",\n        srcSet: image.srcSetWebp,\n        sizes: image.sizes\n      }), _react.default.createElement(\"source\", {\n        srcSet: image.srcSet,\n        sizes: image.sizes\n      }), _react.default.createElement(Img, {\n        alt: alt,\n        title: title,\n        src: image.src,\n        style: imageStyle,\n        ref: this.imageRef,\n        onLoad: this.handleImageLoaded,\n        onError: this.props.onError\n      })), this.state.hasNoScript && _react.default.createElement(\"noscript\", {\n        dangerouslySetInnerHTML: {\n          __html: noscriptImg((0, _extends2.default)({\n            alt: alt,\n            title: title\n          }, image))\n        }\n      }));\n    }\n\n    if (fixed) {\n      var _image = fixed;\n      var divStyle = (0, _extends2.default)({\n        position: \"relative\",\n        overflow: \"hidden\",\n        display: \"inline-block\",\n        width: _image.width,\n        height: _image.height\n      }, style);\n\n      if (style.display === \"inherit\") {\n        delete divStyle.display;\n      }\n\n      return _react.default.createElement(Tag, {\n        className: (className ? className : \"\") + \" gatsby-image-wrapper\",\n        style: divStyle,\n        ref: this.handleRef,\n        key: \"fixed-\" + JSON.stringify(_image.srcSet)\n      }, _image.base64 && _react.default.createElement(Img, {\n        alt: !this.state.isVisible ? alt : \"\",\n        title: title,\n        src: _image.base64,\n        style: imagePlaceholderStyle\n      }), _image.tracedSVG && _react.default.createElement(Img, {\n        alt: !this.state.isVisible ? alt : \"\",\n        title: title,\n        src: _image.tracedSVG,\n        style: imagePlaceholderStyle\n      }), bgColor && _react.default.createElement(Tag, {\n        title: title,\n        style: {\n          backgroundColor: bgColor,\n          width: _image.width,\n          opacity: !this.state.imgLoaded ? 1 : 0,\n          transitionDelay: \"0.25s\",\n          height: _image.height\n        }\n      }), this.state.isVisible && _react.default.createElement(\"picture\", null, _image.srcSetWebp && _react.default.createElement(\"source\", {\n        type: \"image/webp\",\n        srcSet: _image.srcSetWebp,\n        sizes: _image.sizes\n      }), _react.default.createElement(\"source\", {\n        srcSet: _image.srcSet,\n        sizes: _image.sizes\n      }), _react.default.createElement(Img, {\n        alt: alt,\n        title: title,\n        width: _image.width,\n        height: _image.height,\n        src: _image.src,\n        style: imageStyle,\n        ref: this.imageRef,\n        onLoad: this.handleImageLoaded,\n        onError: this.props.onError\n      })), this.state.hasNoScript && _react.default.createElement(\"noscript\", {\n        dangerouslySetInnerHTML: {\n          __html: noscriptImg((0, _extends2.default)({\n            alt: alt,\n            title: title,\n            width: _image.width,\n            height: _image.height\n          }, _image))\n        }\n      }));\n    }\n\n    return null;\n  };\n\n  return Image;\n}(_react.default.Component);\n\nImage.defaultProps = {\n  critical: false,\n  fadeIn: true,\n  alt: \"\",\n  Tag: \"div\"\n};\n\nvar fixedObject = _propTypes.default.shape({\n  width: _propTypes.default.number.isRequired,\n  height: _propTypes.default.number.isRequired,\n  src: _propTypes.default.string.isRequired,\n  srcSet: _propTypes.default.string.isRequired,\n  base64: _propTypes.default.string,\n  tracedSVG: _propTypes.default.string,\n  srcWebp: _propTypes.default.string,\n  srcSetWebp: _propTypes.default.string\n});\n\nvar fluidObject = _propTypes.default.shape({\n  aspectRatio: _propTypes.default.number.isRequired,\n  src: _propTypes.default.string.isRequired,\n  srcSet: _propTypes.default.string.isRequired,\n  sizes: _propTypes.default.string.isRequired,\n  base64: _propTypes.default.string,\n  tracedSVG: _propTypes.default.string,\n  srcWebp: _propTypes.default.string,\n  srcSetWebp: _propTypes.default.string\n});\n\nImage.propTypes = {\n  resolutions: fixedObject,\n  sizes: fluidObject,\n  fixed: fixedObject,\n  fluid: fluidObject,\n  fadeIn: _propTypes.default.bool,\n  title: _propTypes.default.string,\n  alt: _propTypes.default.string,\n  className: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object]),\n  // Support Glamor's css prop.\n  critical: _propTypes.default.bool,\n  style: _propTypes.default.object,\n  imgStyle: _propTypes.default.object,\n  placeholderStyle: _propTypes.default.object,\n  backgroundColor: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.bool]),\n  onLoad: _propTypes.default.func,\n  onError: _propTypes.default.func,\n  Tag: _propTypes.default.string\n};\nvar _default = Image;\nexports.default = _default;","import React from 'react'\nimport { StaticQuery, graphql } from 'gatsby'\nimport Img from 'gatsby-image'\n\nconst Image = (props) => (\n  <StaticQuery\n    query={graphql`\n      query {\n        images: allFile {\n          edges {\n            node {\n              relativePath\n              name\n              publicURL\n              childImageSharp {\n                sizes(maxWidth: 600) {\n                  ...GatsbyImageSharpSizes\n                }\n              }\n            }\n          }\n        }\n      }\n    `}\n\n    render={(data) => {\n      const image = data.images.edges.find(n => {\n        return n.node.relativePath === props.filename;\n      });\n\n      if (!image) {\n        return null;\n      }\n\n      const childImageSharp = image.node.childImageSharp;\n      if (!childImageSharp) {\n        return (<img style={{width: \"100%\"}} alt={props.alt} src={image.node.publicURL} />);\n      }\n      const imageSizes = image.node.childImageSharp.sizes;\n      return (\n        <Img\n          alt={props.alt}\n          sizes={imageSizes}\n        />\n      );\n    }}\n  />\n)\nexport default Image;\n","import React from 'react';\nimport styled from \"styled-components\";\nimport Image from \"../components/Image\";\n\nconst Wrap = styled.div`\n    display: flex;\n    margin: 20px 0;\n    justify-content: center;\n`;\n\nconst Container = styled.div`\n    flex: 1;\n    ${props => props.max ? \"max-width: \" + props.max + \"px\" : \"\"};\n`;\n\nconst Caption = styled.div`\n    font-family: \"Gentium Book Basic\", times, serif;\n    font-style: italic;\n    font-size: 16px;\n    color: #999;\n    margin-bottom: 30px;\n    margin-top: 12px;\n    text-align: center;\n\n    img {\n        width: 100%;\n        margin-bottom: 10px;   \n    }\n`;\n\nexport default class CaptionedImage extends React.Component {\n    render() {\n        return (\n            <Wrap>\n                <Container max={this.props.max}>\n                    <Image filename={this.props.filename} alt={this.props.alt} />\n                    <Caption>{this.props.caption}</Caption>\n                </Container>\n            </Wrap>\n        );\n    }\n};\n","// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)\nvar $export = require('./_export');\n\n$export($export.P, 'Function', { bind: require('./_bind') });\n","'use strict';\nvar aFunction = require('./_a-function');\nvar isObject = require('./_is-object');\nvar invoke = require('./_invoke');\nvar arraySlice = [].slice;\nvar factories = {};\n\nvar construct = function (F, len, args) {\n  if (!(len in factories)) {\n    for (var n = [], i = 0; i < len; i++) n[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');\n  } return factories[len](F, args);\n};\n\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = arraySlice.call(arguments, 1);\n  var bound = function (/* args... */) {\n    var args = partArgs.concat(arraySlice.call(arguments));\n    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);\n  };\n  if (isObject(fn.prototype)) bound.prototype = fn.prototype;\n  return bound;\n};\n","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = require('./_export');\n\n$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });\n"],"sourceRoot":""}